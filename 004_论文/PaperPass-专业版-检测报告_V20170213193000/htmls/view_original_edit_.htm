<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>PaperPass 最权威论文抄袭检测系统</title>
<style type="text/css">
<!--
user_icon {
color: #FFFFFF;
}
html
{
overflow-x:hidden;
overflow-y:auto;
}
body,td,th {
font-family: "微软雅黑";
font-size: 12px;
}
h1,h2,h3,h4,h5,h6 {
font-family: "宋体";
}
p{
margin-bottom:10px;
}
demo_padding {
line-height: 30px;
}
.zhengwen {
padding-right: 15px;
padding-left: 5px;
padding-bottom:100px;
font-size: 13px;
line-height: 20px;
color: #666666;
}
.zhengwencenter {
padding-right: 15px;
padding-left: 0px;
margin-bottom:10px;
font-size: 13px;
line-height: 20px;
color: #666666;
text-align:center
}
.neikuang {
background-color: #EBEBEB;
border: 1px solid #999999;
padding-right: 10px;
padding-left: 10px;
margin-top:10px;
margin-left:25px;
width:300px;
}
.shubu{
height: 20px;
width: 20px;
margin-left:25px;
background-color: #FFFFFF;
border: 1px solid #999999;
text-align: center;
vertical-align: middle;
display: block;
color: #666666;
}
a.red:link {color:#FF0000}
a.red:visited {color:#FF0000}
a.red:hover {color:#000000}
a.red:active {color:#000000}

a.orange:link {color:#FF6600}
a.orange:visited {color:#FF6600}
a.orange:hover {color:#000000}
a.orange:active {color:#000000}

a.dark:link {color:#666666}
a.dark:visited {color:#666666}
a.dark:hover {color:#000000}
a.dark:active {color:#000000}

a.pagelink:hover {color:#000000}
a.pagelink:active {color:#000000}

.green{color:#008000}
.gray{color:#666666}
.red{color:#FF0000}
.orange{color:#FF6600}
a{TEXT-DECORATION:none}

-->
</style>
</head>
<body>


<div class="zhengwen">

<span style="margin-left:25px"></span><font size=3 color=red>蓝色文字是系统自动修改的结果，仅供参考，如需使用请加工润色！</font><br><br><span style="margin-left:25px"></span>第一章引言1.1选题背景
<br><br>
<span style="margin-left:25px"></span>高频交易（High frequency trading）是金融行业与计算机行业发展到一定阶段后相互结合而形成的一种的交易形式。
<br><br>
<span style="margin-left:25px"></span>高频交易的主要特征如下：使用高速计算机系统生成并发送委托单，使用机房托管与直连交易所的数据通道用来保证极低的数据传输耗时，每笔交易平均持仓时间极短，大量发送和撤销委托订单，在收盘时会平仓以避免隔夜风险。高频交易带来了什么？
<br><br>
<span style="margin-left:25px"></span>对于投资者而言，高频交易意味着超强的盈利能力，规避隔夜风险，降低隔夜成本。对于市场而言，高频交易带来了巨大的流动性，同时通过套利机制帮助市场恢复扭曲价格。高频交易与量化交易、程序化交易之间存在着一些概念混淆，它们既有联系又有区别，需要进行适当的区分。
<br><br>
<span style="margin-left:25px"></span>量化交易是指用量化的数学模型来代替人为主观判断，利用数学模型从市场的诸多信号中筛选出“有效信号”，减少了交易员个人情绪对交易决策的影响，避免交易员在极端市场的情况下做出非理性的投资选择。程序化交易是指设计人员将下单策略写入计算机程序，由程序自动生成、执行买卖指令的交易行为，通过程序化可以有效避免手工操作导致的失误。从持仓时间来看，高频交易持仓时间多在一天以内，量化交易的持仓时间可长达数周，程序化交易的持仓时间可以更长。从交易策略来看，高频交易多依赖计算机的强劲性能在市场中寻找机会，量化交易多依赖统计套利从历史数据中发现大概率事件，程序化交易的策略或者内含的思想大多源自投资人的直接授意。高频交易能否为社会创造一定价值？
<br><br>
<span style="margin-left:25px"></span>不少学者对此进行了一定的实证研究，研究结果表明，总体而言，高频交易可以帮助市场提高流动性，降低市场的价差，帮助市场价格恢复正常水平。图1.1高频交易在美国欧洲以及亚洲的证券市场交易额占比
<br><br>
<span style="margin-left:25px"></span>根据TABB Group的研究显示，截止2015年，美国和欧洲证券市场的高频交易比例占比已接近70%，而亚洲证券市场的高频交易比例尚未达到30%。
<br><br>
<span style="margin-left:25px"></span>我国高频交易的研究刚刚起步，学术界将高频交易作为市场微观结构研究的前沿领域，而一些机构投资者也开展了高频交易的尝试。1.2国内外研究现状
<br><br>
<span style="margin-left:25px"></span>最近十年国内外学者对高频交易进行了多方面的大量研究，为高频交易提供了大量的理论支持，大大的促进了高频交易在交易市场上的发展。
<br><br>
<span style="margin-left:25px"></span>Cvitanic和Kirilenko（2010）在《High Frequency Traders and AssetPrices》中首次给出了高频理论分析的模型。Chaboud A P， Chiquoine B， Hjalmarsson E（2014）在《Machines: Algorithmic Trading in the Foreign Exchange Market》中指出：高频交易、算法交易、程序化交易有较大相似性，所以提出了一种观点“高频交易是算法交易的一种特殊形式”Macintosh（2013）在《High Frequency Traders： angelsordevils》中介绍了高频交易的操作方式与特点，以及其与传统交易市场行为的差别， Macintosh在其文章中，介绍了算法交易( Algorithmic Trading， AT)与高频交易( High Frequency Trading， HFT)之间的共性和区别，如下表所示：表1.1高频交易与算法交易的共性和区别
<br><br>
<span style="margin-left:25px"></span>AT和HFT的共性AT的独有特征HFT的独有特征
<br><br>
<span style="margin-left:25px"></span>1、事先设计好的交易策略
<br><br>
<span style="margin-left:25px"></span>2、专业交易员操作
<br><br>
<span style="margin-left:25px"></span>3、实时监控市场数据
<br><br>
<span style="margin-left:25px"></span>4、自动提交指令
<br><br>
<span style="margin-left:25px"></span>5、自动管理指令
<br><br>
<span style="margin-left:25px"></span>6、无人工干预直接市场接入1、代理交易
<br><br>
<span style="margin-left:25px"></span>2、市场影响最小化
<br><br>
<span style="margin-left:25px"></span>3、目标为获取特别基数指数
<br><br>
<span style="margin-left:25px"></span>4、持有时间为日/周/月
<br><br>
<span style="margin-left:25px"></span>5、通过时间和跨市场执行指令1、海量指令
<br><br>
<span style="margin-left:25px"></span>2、迅速指令撤销
<br><br>
<span style="margin-left:25px"></span>3、内部专用平台
<br><br>
<span style="margin-left:25px"></span>4、买卖交易获利（中间人）
<br><br>
<span style="margin-left:25px"></span>5、交易日结束平仓
<br><br>
<span style="margin-left:25px"></span>6、持有时间极短，秒/分/小时
<br><br>
<span style="margin-left:25px"></span>7、每单获利较低
<br><br>
<span style="margin-left:25px"></span>8、低延迟要求
<br><br>
<span style="margin-left:25px"></span>9、利用主机托管/近程服务以及个人数据种子
<br><br>
<span style="margin-left:25px"></span>10、关注高流动金融工具
<br><br>
<span style="margin-left:25px"></span>国内对高频交易的研究起步较晚，广大研究工作者的研究成果都推动了高频交易在国内的发展。
<br><br>
<span style="margin-left:25px"></span>来升强、朱建平（2009）在《高频数据交易策略与波动性分析》中，对高频交易之所以存在的基础，有效市场假说的缺点，行为金融理论发展进行了深入研究。王苏生、江国朝、余臻、许桐桐（2016）在《高频交易刍论-基于中国证券市场的实证研究》中，进一步将高频交易概念、投资策略、影响市场的机制等方面进行了详细分析，基本上涵盖了权威机构对高频交易的评价。胡天福（2012）在《高频交易在中国证券市场的应用研究》中介绍了高频交易的出现背景与定义，同时介绍了常用的算法交易策略如：时间加权平均算法、参与率算法等。潘晔（2014）在《基于高频交易模式下期货投资组合策略研究》中基于贝尔实验室工程师Kelly提出的“资金增长最快的投资比例”理论进行投资组合构建模型研究，验证了高频交易中组合将两个不同策略组合在一起的可行性。李超（2013）在《我国股指期货与股票组合的高频套利策略研究》中使用相关性分析以及聚类分析为股指期货与股票寻找最优投资组合，然后采用稳定分布拟合得到的收益率差额，并据此计算出最佳建仓平仓点，并进而对建仓平仓的冲击成本进行了细致的估计，最终证明在国内市场上存在着一定的高频交易机会。1.3研究的目的和意义
<br><br>
<span style="margin-left:25px"></span>随着高频交易在日常交易中所占份额的日益增长，对高频交易的影响因素的研究也逐渐受到了人们的重视。
<br><br>
<span style="margin-left:25px"></span>交易员们期望能在复杂的影响因子中能区分出有利或者有害的部分，用以在市场中做出较为正确，甚至是哪怕51%正确的选择。因此对高频交易的影响因素的分析正是为此提出的研究课题，期望可以在这个研究中找到一些可准确测量的因素，评价这些因素对高频交易的影响方向和影响大小，进而更好的发挥高频交易“有益于”市场的作用，让高频交易更多的为市场创造一些价值。第二章高频交易的理论基础
<br><br>
<span style="margin-left:25px"></span>2.1高频交易出现的原因
<br><br>
<span style="margin-left:25px"></span>高频交易并非突然出现的事物，而是在漫长的市场发展中出现的现象。
<br><br>
<span style="margin-left:25px"></span>在证券市场刚刚诞生的时候，主要使用人工方式进行金融产品的交易活动。
<br><br>
<span style="margin-left:25px"></span>在还没有发展出计算机的年代，交易方式最常见的是公开喊价，在一个人潮涌动的大厅中，交易员用喊话和手势来表示买入、卖出、开仓、平仓、合约月份、价格等信息。伦敦证券交易所在1970年初首次采用了市场价格显示装置，价格几秒钟即可更新一次。70年代前期，美国证券商协会NASD为了解决本国的柜台市场分割问题，创建了“全美证券协会报价系统”，把五百多个做市商的交易设备和数据中心链接在同一个网络，形成了一个巨大的数据中心。纽约证券交易所在1978年创建了“市场间交易系统”，利用电信网络把多个交易所连接到一起，使各交易所每种股票的价格和成交量在荧屏上显示，投资者从此能够将证券在任何一个证券市场上进行买卖。在1990之后，因特网迅速普及，从大学、科研机构走向了企业级应用，网上交易逐渐取代了人工交易，与人工交易相比，网上交易更加方便快捷、费用低廉、展示直观。2005年，美国证券交易委员会SEC鉴于市场保护的考虑，实行了名为Regulation National Market System（Reg NMS）的法律。Reg NMS要求经纪人在代理投资者进行买卖时，必须采用“最好的市场价”来进行交易。何为“最好的市场价”？ Reg NMS给出了一个 National Best Bid and Offer（ NBBO）的概念，它把全美股票市场的交易订单数据都汇总到一个地方（ Securities Information Processor），之后通过程序计算出来一个“公允”的市场价，最终将该市场价展示在各个证券交易所。但是由于SIP的速度问题，各高频交易公司纷纷设立了自己的独立SIP来缩短计算NBBO的时间，并且根据提前计算出的结果进行“提前”交易。因此高频交易HFT的目标就是速度达到更快，要超越所有的投资者，也要超越其他的高频交易者。为了达成这个目标， HFT创造了很多神奇的工程，例如为了把纽交所与芝加哥期货市场之间的通讯时间降低三毫秒而耗费数亿美元搭建了直线通讯光缆，例如为了几毫秒的提速而频繁巨资更新通讯设备，甚至把服务器放在证券交易所的机房中。当然带来的好处是巨大的，高频交易带来了大量的流动性，减少了买卖差价，同时也带来了大量的利润。我国证券市场的起步时间与国外相比较晚。
<br><br>
<span style="margin-left:25px"></span>1990年11月26日，上海证券交易所经国务院授权中国人民银行批准后宣布成立，并于1990年12月19日正式对外营业；1991年4月11日，深圳证券交易所经批准后也宣布成立，并于1991年7月3日正式营业。在上海证券交易所和深圳证券交易所成立之后，我国股票交易从此进入了场内集中撮合成交的新时代。1990年12月，“全国证券交易所自动报价系统”正式对外运行。1993年2月，“中国证券交易系统有限公司”宣布成立，从此之后我国证券交易、交割、清算和托管等都在该公司统一管理。在我国早期证券市场刚刚开放时，采用了场外交易、记账交易等形式，随后电话委托、营业部电脑交易等形式在我国出现，1997年3月，“视聆通多媒体公众信息网”被原中国华融信托投资公司隆重推出，标志着我国网上证券交易的开端（姜金胜，2006）。随后，各证券公司纷纷推出了自己的网上证券交易系统，我国投资者也逐渐接受并适应了网上交易这种形式。与国外相比，我国的投资者结构和市场结构与国外差距较大，因此一直以来机构投资者的交易占比比较少，程序化交易不发达。2005年，ETF正式上市交易。因投资者对于套利交易的需求，程序化交易在我国逐渐发展壮大。股指期货在2010年上市后，期货日内交易策略和量化Alpha策略越来越多，国内程序化交易进入快速成长阶段。由于发展时间较短，程序化交易在中国尚处于初级阶段。因市场环境的风控机制尚不健全，发生了多起重大事故，例如：光大证券8-16的黑天鹅事件。这不仅暴露出事发公司自身存在的问题，也反映出整个金融行业的内控、交易制度等还需进一步加强。随着程序化交易在我国的高速发展，业内对高频交易的探索也逐渐频繁，但由于国内国外市场的差异（美国有众多交易所，同一个股票可以在多个交易所挂牌交易；国内仅有两个股票交易所，并且一支股票只能在一个交易所上市交易；美国的HFT可以在微妙级从A交易所买到股票xyz，然后在二十微妙后将该股票在B交易所卖出，以获得相应的价差利润。此外在数据及时性上：国内股票交易所采用的数据方式为3秒一次发逐笔交易；股指期货为1秒两次逐笔交易；期权为1秒两次无逐笔交易），在微观层面上，国内目前没有相应的环境，因此并没有出现“传统意义的高频交易”，而是多采用量化交易、统计套利、混合策略等方式展开的高频交易。较为闻名的例如：上期 CTP 开发团队、中金所飞马团队、中信期货的众信团队、盛立金融软件等。2.2高频交易存在的基础
<br><br>
<span style="margin-left:25px"></span>因国内股票市场一般情况下在微观层面并不具备高频交易的基础，因此下文讨论的均为期货市场。
<br><br>
<span style="margin-left:25px"></span>2.2.1市场微观结构
<br><br>
<span style="margin-left:25px"></span>在微观结构这个层面，我们需要分析市场各要素的构成：
<br><br>
<span style="margin-left:25px"></span>交易者、买入价bid，卖出价ask、商品、开仓、平仓、做多\空、套期保值、保证金、撮合成交。交易者：
<br><br>
<span style="margin-left:25px"></span>为市场的实际参与主体，可以为个人、企业、法人等主体；买入价bid：
<br><br>
<span style="margin-left:25px"></span>为买入者期望买入某个商品的价格；卖出价ask：
<br><br>
<span style="margin-left:25px"></span>为卖出者期望卖出某个商品的价格；商品：
<br><br>
<span style="margin-left:25px"></span>在集中市场中，商品一般为质量、等级、规格容易划分的商品，例如期货合约是标准化的，而股票交易市场每一股相对于其他股都是完全一质的；开仓：
<br><br>
<span style="margin-left:25px"></span>是指交易员卖出或买入期货合约，创建期货仓位的行为；平仓：
<br><br>
<span style="margin-left:25px"></span>是指交易员为结束期货交易，买入或卖出与其所持有合约的数量、品种及交割月份相同，但交易方向不同的合约的行为。做多\空：
<br><br>
<span style="margin-left:25px"></span>1、就投机而言：做多指投资者认为后市要涨，于是购买了合约，待日后价格高升后，高价卖出合约以赚取价差利润。做空指投资者认为后市价格可能下降，于是在市场中出售合约。待日后价格充分下跌，低价买入以赚取利润。 2、套保而言：做多就是规避或对冲掉日后价格上升带来生产成本提高的危险，提前将成本锁定。做空就是规避或对冲掉日后价格下跌带来的生产利润降低的风险，提前将利润锁定。套期保值：
<br><br>
<span style="margin-left:25px"></span>买入（卖出）与投资者实际生产中经营的商品类型近似、数量匹配、期限接近，但交易方向不同的期货合约。投资者希望在未来某个时刻通过反向操作同样的合约来抵消该商品或金融工具因价格变动所带来的损失。保证金：
<br><br>
<span style="margin-left:25px"></span>是交易所要求投资者提供的现金担保，以确认其可以履行合约。保证金是投资者对其持有的商品合约负责所表示的信用，存放在其交易帐户上的资金。撮合交易：
<br><br>
<span style="margin-left:25px"></span>是指买卖双方将买卖指令统一发送到交易所的计算机中，通过计算机按照价格、数量、时间等数据对指令进行匹配，最终促成交易的迅速打成。在微观结构层面，买入价bid和卖出价ask之间存在一定差价，高频交易通过不断的双向报价促进差价的减少，最终到达mid，使得交易成交；
<br><br>
<span style="margin-left:25px"></span>可以自由选择做多做空使得交易者可以在价格的上涨或者下跌之间进行自由投票；保证金策略使得交易者可以通过杠杆来撬动更大的资金；撮合交易是基础设施，保障交易的价格可以被直观的看到并影响价格的生成。2.2.2有效市场假说
<br><br>
<span style="margin-left:25px"></span>有效市场假说（Efficient Markets Hypothesis，EMH）是由尤金•法玛（EugeneFama）于1970年深化并提出的。
<br><br>
<span style="margin-left:25px"></span>“有效市场假说”兴起于20世纪初，路易斯•巴舍利耶(Louis Bachelier)在分析股票收益率时，创新的运用了统计分析理论。根据其对股票收益率的研究报告，股票收益率的数学期望值始终等于零。关于有效市场假说有三种形式：
<br><br>
<span style="margin-left:25px"></span>一、弱有效市场；二、半强式有效市场；三、强有效市场。其含义分别如下：弱有效市场：
<br><br>
<span style="margin-left:25px"></span>市场当前的价格已充分体现出了证券的所有历史价格信息，例如：股票的成交价格、融资金额等。在此市场下，价格技术分析将不会产生超额利润。半强式有效市场：
<br><br>
<span style="margin-left:25px"></span>市场当前的价格可以将全部已披露的公司有关运营远景的信息反映出来，例如：成交量、成交价、盈利来源、盈利预测、公司管理信息以及财务数据等。在此市场下，基本面分析将不会带来额外收益。强有效市场：
<br><br>
<span style="margin-left:25px"></span>市场当前的价格能够完全地反映所有和公司相关的信息，已公开披露的或者未公开的信息都包含在内。在此市场下，即使是内幕消息者的拥有者也不能赚取超额利润。在现代金融领域中，根据价格走势来预测未来价格，并以此为依据开展交易的行为一向被认为是短期有用的噪音行为（姜金胜，2006）。
<br><br>
<span style="margin-left:25px"></span>但实际上现代金融的假设过于严苛，例如：交易无摩擦（但事实上交易费用即为摩擦之一，且力度之大使其无法忽略不计）、拥有充分流动性（不同市场的流动性截然不同），交易者是完全理性的（但不理性的交易者确实是存在的，且以我国市场忽上忽下的表现来看，不理性的交易者似乎占了较大份额），如此种种假设排除了交易者的行为、信息在市场中的扩散与影响，但实际上，由于这些假设与实际不符，一定会导致了市场价格与内在价值的不一致。1980年的Crossman-Stiglitz 悖论指出：若是证券价格可以反映所有信息，则证券价格就是信息完全的。那么就会导致没有投资者会愿意耗费成本去搜寻关于该证券的额外信息。倘若交易者都不再搜寻此证券的信息，也就不再有通过额外信息进行交易获利的动机。那么该证券的价格不会包含私有信息，即私有信息在价格中无法得到体现，于是推论竞争在均衡市场中不存在。学术界对这些问题进行了反思，有的学者开始对市场微观结构展开研究。
<br><br>
<span style="margin-left:25px"></span>他们分析了人的非理性和差异性，并以此解释了交易者的非理性行为。大量的行为金融学研究表明：在同时存在理性交易者和非理性交易者的市场中，由于羊群效应和从众心理等特征，非理性因素可以对价格产生持续且长久的影响。由于金融市场并非如理想中的有效率，那么说明金融市场并非强有效市场，那么意味着历史价格将不可避免的包含着未来价格变动的信息，
<br><br>
<span style="margin-left:25px"></span>因此这为技术分析提供了一个理论基础，于是大量基于量价的数值指标、移动平均、图形分析或者支撑-阻力线、止损线等技术流派流行开来。投资者存在非理性行为，市场对信息也存在着一定的响应延迟。
<br><br>
<span style="margin-left:25px"></span>这两点原因导致了市场的无效率。投资者在一瞬间对突发信息的反应不足或反应过度，都可能造成市场的短期失效。高频交易就是主动寻找市场的短期失效并买卖获利。基于不同纬度的视角，能够在市场上发现不同类型的失效情形，于是针对不同失效情形会存在其对应的交易策略。对交易策略进行粗略分类，有如下类型：根据市场的流动性状况参与交易；根据市场微观结构变化参与交易；根据突发事件对市场的影响进行趋势交易或者套利交易。通过高频交易可以提高市场的运行效率，这便是高频交易存在的意义之一。2.2.3流动性补充
<br><br>
<span style="margin-left:25px"></span>在交易市场中流动性是必不可少的，否则交易无法成交，市场也将不复存在。
<br><br>
<span style="margin-left:25px"></span>高频交易的主流策略分为如下几种：做市商策略；统计套利策略；方向性策略；微观结构策略。在这四类策略中，前三类都可以提供较大流动性。对于做市商策略来说：
<br><br>
<span style="margin-left:25px"></span>较高的买卖价差会出现在流动性略低的合约上，每进行一笔这样的交易都会带来较大的利润。参与此类交易，既可以赚取利润，也可以为市场补充流动性。对于统计套利策略来说：
<br><br>
<span style="margin-left:25px"></span>运用依赖于计算机模型的高速交易技巧来探测市场上价格波动的异常，在发现异常后迅速参与交易，既可以将市场扭曲的价格恢复正常，也可以为市场提供了不少的流动性。对于方向性策略来说：
<br><br>
<span style="margin-left:25px"></span>如根据新闻交易、流动性探测、势能交易等。该交易策略也能够为市场中增加流动性。对于微观结构策略：
<br><br>
<span style="margin-left:25px"></span>延时套利、闪电交易等。只是少量的增加了部分流动性。此外有不少学者对高频交易是否可以增加流动性表示质疑。
<br><br>
<span style="margin-left:25px"></span>他们认为高频交易只是在虚假的增加流动性，因为高频交易的证券或商品持有时间非常短暂（甚至可以短暂到一秒之内），然后又重新在市场上售出。市场上经常看到的情形是：证券或商品会在高频交易者之间频繁辗转，在频繁的买入卖出后哄抬了市场价格，吸引新投资者出现，最终把证券或者商品甩给一无所知的新投资者。据此，反对派学者认为高频交易并并没有创造流动性，一切交易量暴增带来的流动性都是假象。但更多的学者与高频交易参与者根据实证分析达成了共识：
<br><br>
<span style="margin-left:25px"></span>高频交易可以为市场提供流动性，降低了市场参与者的等待成本，为市场创造了一定的价值。2.2.4套利
<br><br>
<span style="margin-left:25px"></span>套利在金融学中的定义为：
<br><br>
<span style="margin-left:25px"></span>同时在两个不同的市场中，买入与卖出相同类型或者有紧密关系的证券或者投资组合的行为。如果在投资组合中包含有金融工具时，该金融工具可以是同类型的或者是不同类型的。套利最理想的状态是无风险套利，在现代金融中套利已经发展成为在复杂计算机程序的帮助下从不同市场上同一证券的微小价差中获利的技术。高频交易的本质是利用技术的优势去捕捉暂时的市场错误，当两个市场相关联的商品发生价格不一致时，即可采用套利的组合赚取利润。
<br><br>
<span style="margin-left:25px"></span>由于高频交易的“高频”特性，使得市场错误更加容易在“高频”的数据中被发现，进而使得高频交易在修复市场错误的套利行为中表现良好。因此说套利是HFT存在的另一个基础。2.3高频交易将来的趋势
<br><br>
<span style="margin-left:25px"></span>对于高频交易已经有了较为广泛的探讨，学术界对其利弊也进行了深刻的剖析。
<br><br>
<span style="margin-left:25px"></span>高频交易的益处在于能带来高利润，而且能够更好的处理风险，更有效的提升市场流动性，同时利润最大化原则使得市场可以更加有效率的运行，
<br><br>
<span style="margin-left:25px"></span>使得市场降低震荡、更加稳定，此外高频交易可以显著提高交易成交量。瑞信的研究表明高频交易使得美国市场日成交额增加了两倍，约贡献了50%~70%的交易量，高交易量即意味着高的价格发现能力和更佳的流动性，使得市场具有更好的运行质量（蓝海平，2014）。高频交易的弊端也较为严重，高频交易涉及硬件、软件与网络通信技术等多种基础设备，因此直接风险就是硬件损坏与软件漏洞，例如光大证券的8-16事件。
<br><br>
<span style="margin-left:25px"></span>此外高频交易对市场也有重大影响，如果市场存在较多的高频交易者，则基本面消息对股价的影响将会放大数倍，使得市场价格无法正常形成，此外高频交易的频繁撤销订单的特征使得指令的成交率急剧下降。这些问题都意味着高频交易可能使市场本身的系统风险迅速升高。关于高频交易有几个关键性技术：
<br><br>
<span style="margin-left:25px"></span>低通讯延迟技术；专用计算硬件；先进算法应用。这几个方面都是将来要重点发展的方向。此外在监管方面，由于高频交易带来了诸多挑战，例如高频交易带来的风险使得监管层在慎重考虑加强监管力度，
<br><br>
<span style="margin-left:25px"></span>例如为抑制投机、平抑波动而限制开仓/平仓次数，以及设置较高的保证金水平，收取较高的佣金等策略。总体而言，市场发展的方向是有益于高频交易发展的。第三章高频交易的技术基础
<br><br>
<span style="margin-left:25px"></span>3.1现代交易市场的支持
<br><br>
<span style="margin-left:25px"></span>业务的发展与技术的发展是紧密关联、互相促进的。
<br><br>
<span style="margin-left:25px"></span>现代交易市场与过去相比较已经是一个较为完善的市场体系了，它的完善程度体现在如下方面：一是已经有了一个初步成形的法规体系和执法机制；二是市场的组织架构也比较健全；三是市场的技术交易系统基本功能较为完备（戴文华，2013）。随着计算机行业的发展，交易市场摆脱了人工记账、人工结算的时代。
<br><br>
<span style="margin-left:25px"></span>现代交易系统在安全、保密、效率等方面远胜于过去。如今的证券或者期货市场日均成交额都以千亿计，像二三十年前一样使用纸张确认、交易、交收的交易方式，是完全不可能实现的。现代交易系统使用了超强计算能力的计算机软硬件，使用了万兆级的网络通讯设备，对外开放了直连接口提供直连交易所的交易服务，对内则有高速实时的风险控制平台用于在交易过程中实时计算风险值并提示预警。通过这些基础设施，市场效率获得了极大提升。在期货市场中，需要重点提及的是综合交易平台CTP（Comprehensive Transaction Platform）。
<br><br>
<span style="margin-left:25px"></span>它是一套丰富的期货经济业务管理系统，内部含有如下组成部分：交易系统；风险控制系统；结算系统等。交易系统负责“订单处理”、“交易行情下送”、“银期转账”业务等功能。结算系统负责资金、交易、账户、信息查询以及报表查询等功能。风控系统则用于控制系统运行风险，在危险发生时及时预警，及时触发危机事件处理机制。上期所CTP系统是国内最早推出的基于内存的交易系统。该系统拥有强大的计算能力，委托性能可以支撑2000笔/秒的委托，可支持10000客户并发。该系统主要面向期货公司，也可以支持基金公司、投资公司等进行期货交易。此外还有中金所的飞马系统，可以做中金所的股指期货、国债期货等期货品种的程序化交易。
<br><br>
<span style="margin-left:25px"></span>该系统的主要方向是面向极速交易。据相关资料介绍，该系统的生产服务器距“开拓者”，“金字塔”等软件公司的服务器3米，距离 CTP接口交易前置机3米，距中金所交易撮合机距离仅有50米。飞马系统内部性能表现优良，数讯机房飞马交易系统的整体延时可以做到1.5ms以内。飞马系统分为飞马会员管理端和场上交易端，基本功能含：客户管理、费率管理、合约管理、出入金操作、投资者相关查询等。且飞马系统包含仿真环境，可以帮助用户在实盘前进行适应性测试。3.2计算机行业的发展
<br><br>
<span style="margin-left:25px"></span>计算机行业经过七十余年的发展，已经深深的进入了人类的生活：
<br><br>
<span style="margin-left:25px"></span>1946年第一台计算机诞生；1959年第一台晶体管计算机出现；1962年集成电路计算机得到了应用；1977年的AppleⅡ型计算机是第一款个人计算机。随后各种大型机、中型机、小型机相继出现。随着计算机制造的成本越来越低，使用范围日益广泛。计算机行业的变化堪称是翻天覆地的，笔者第一次使用计算机时，还是插着磁盘的80586，而现在已经满世界的安卓6.0。在硬件方面，硬件架构不断更新，从8086、80286、80386、80486、80586、奔腾、赛扬、酷睿、ARM，一代代新的CPU架构推陈出新；在操作系统方面，操作系统不断的更新迭代，UNIX、FREEBSD、XP、WIN7、WIN8、WIN10。软件方面，计算机刚刚诞生时，只有Fortran可以使用，而现在计算机语言已经多达数千种，计算机从最开始的军事用途，走进了大学，走进了人类生活的方方面面。在证券市场或者期货市场中，计算机行业的发展大大促进了市场交易量的增长，或者说计算机行业的发展是市场交易量提升的基础条件。如今网上证券(期货)交易已经深入人心，网上证券是计算机行业与证券期货行业的重要结合。
<br><br>
<span style="margin-left:25px"></span>通过网络交易，投资者可以随时随地参与到市场运行中，降低交易成本，及时获取交易信息并做出相应决策。券商或者期货经纪商也可以通过网络为投资者及时提供诸多服务，例如：国际经济形势分析、政府政策报告解读、企业经营治理分析、证券版块分析等。计算机行业的发展促进了人类生活的方方面面，证券市场或者期货市场也不例外，相信在未来的一段时间内，
<br><br>
<span style="margin-left:25px"></span>计算机行业和金融行业还将继续深入融合，为世界创造出更多的价值。3.3常见高频交易工具
<br><br>
<span style="margin-left:25px"></span>3.3.1交易开拓者
<br><br>
<span style="margin-left:25px"></span>交易开拓者（Tradeblazer，简称TB）由深圳开拓者公司开发，是一款期货程序化交易软件。
<br><br>
<span style="margin-left:25px"></span>它具有行情下载、多功能下单、程序化交易、指定历史数据回溯测试等功能。该软件功能丰富，具有如下特色：强大的公式支持系统、投资组合性能测试分析、面向用户的快速下单体系、强大的多帐户管理功能、多种方式的套利功能、动态帐户和风险监控机制。这些功能使得交易开拓者在期货市场十分受用户欢迎。图3.1交易开拓者界面
<br><br>
<span style="margin-left:25px"></span>交易开拓者在国内期货市场使用较为广泛。
<br><br>
<span style="margin-left:25px"></span>通过交易开拓者可以在如下市场进行交易：上海期货交易所、大连商品交易所、郑州商品交易所、中国金融期货交易所。交易开拓者是一款全方面的系统交易平台，不同于市场上其他的程序化软件，交易开拓者系统中自带了客户的资金管理、账户管理、风险管理功能，
<br><br>
<span style="margin-left:25px"></span>使用户可以从多个角度把控交易的风险程度。此外由于高频交易中经常遇到的情况是多账户交易（例如委托人接受多名客户的委托进行下单），交易开拓者提供了多账户管理功能，可以同时操作多个客户账户。同时交易开拓者内嵌了模拟的交易系统，可以对包括股指期货在内的所有期货品种进行模拟交易，客户可以通过模拟交易来学习与测试交易模型，节省了大量的学习成本。
<br><br>
<span style="margin-left:25px"></span>同时交易开拓者还具有历史交易分析，在客户端将客户所有的委托单和成交记录统计为报表，供用户分析与改进自己的交易模型。交易开拓者开发了一套Tradeblazer Language（简称TBL）的开发语言，并且提供了一系列的函数库。
<br><br>
<span style="margin-left:25px"></span>基于TBL语言，用户可以很方便的编写自己的程序化交易代码，进而创建自己的高频交易策略。图3.1一个简单的TBL语言程序
<br><br>
<span style="margin-left:25px"></span>将该公式应用到某个商品后效果如图3.2。
<br><br>
<span style="margin-left:25px"></span>图3.2公式应用到某商品后，该商品触发的开仓与平仓动作
<br><br>
<span style="margin-left:25px"></span>交易开拓者具有“交易策略测试报告”功能，在开发完成一个交易策略之后可以通过此功能进行测试，详见图3.3。
<br><br>
<span style="margin-left:25px"></span>图3.3交易策略的数据回溯测试报告
<br><br>
<span style="margin-left:25px"></span>如果公式中参数较多，TB也提供了交易策略参数优化功能，可以根据历史数据对目标策略进行优化，通过对参数的调整，使策略对数据更加有效。
<br><br>
<span style="margin-left:25px"></span>3.3.2文华财经
<br><br>
<span style="margin-left:25px"></span>文华赢智系统是文华财经根据国内期货市场情况，并参考了国际期货行业发展经验而推出的期货交易系统。
<br><br>
<span style="margin-left:25px"></span>该交易系统有如下特点：支持股指期货与商品期货，内嵌于文华财经行情软件，给客户提供了一个快速方便，包含了期货委托下单功能、程序化交易、持仓组合分析等功能的交易平台。文华财经为移动端用户提供了文华随身行软件，使用该软件可以使用户在任何地点方便的连接到行情市场，发送下单指令以及检查持仓情况。
<br><br>
<span style="margin-left:25px"></span>图3.4文华财经操作界面
<br><br>
<span style="margin-left:25px"></span>文华赢顺支持“云端条件单”功能，如果用户因外出无法联网时，可以使用云端条件单功能，
<br><br>
<span style="margin-left:25px"></span>将未触发的条件单保存在云服务器上，使得满足条件的触发单在电脑关机后依然有效。同时文华赢顺支持画线下单功能，在分析好的为止直接画线，通过画线的方式在图表上快速做出反应。如图3.5中所示，如果沪锌的价格向上突破12995元/吨则开仓做多1手，
<br><br>
<span style="margin-left:25px"></span>如果沪锌的价格向下跌破12930元/吨则开仓做空1手。图3.5文华财经画线下单功能
<br><br>
<span style="margin-left:25px"></span>通过画线下单功能，可以帮助用户根据阻力位和支撑位迅速响应市场变化，避免错过交易机会。
<br><br>
<span style="margin-left:25px"></span>3.3.3Matlab
<br><br>
<span style="margin-left:25px"></span>Matlab（Matrix Laboratory）是一款非常著名的的商业数学软件，该软件由美国的MathWorks公司设计并开发。
<br><br>
<span style="margin-left:25px"></span>经常用于如下领域：数据分析与可视化、算法研究、科学数值计算等。图3.6Matlab启动界面
<br><br>
<span style="margin-left:25px"></span>Matlab是一款高级数学软件，它包含有众多数学算法工具集，内含六百多个在数学工程中经常使用的函数或者公式，通过Matlab可以方便的实现数学建模和图像处理。
<br><br>
<span style="margin-left:25px"></span>不仅包含数学公式，Matlab同样是一种编程语言，它包含如下组成特点：数据结构、控制语句、函数式调用、面向对象编程等。因如上特点用户可以在命令窗口中直接输入语句执行，也可以在文件中写好应用程序之后一起运行。由于Matlab语法简单易懂，且其底层实现是基于编程领域盛行的C++语言为基础的，因此更加符合科技工作人员的使用习惯。
<br><br>
<span style="margin-left:25px"></span>同时Matlab经过了各种优化处理，在运算性能上表现十分出色。通常情形下，用Matlab作为工具编写计算类程序，会使得编程工作量大幅降低。 Matlab的函数集包含函数运算、矩阵运算、特征向量、快速傅立叶变化等函数，可以解决的问题包括矩阵运算、微分方程以及偏微分方程组求解、方程组求解、数据的统计分析、符号运算、工程优化以及数学建模等问题。图3.7Matlab操作界面
<br><br>
<span style="margin-left:25px"></span>Matlab功能强大，经常用到的领域包括：
<br><br>
<span style="margin-left:25px"></span>数字图像运算、信号加工、工程与科学中的绘图、对控制系统进行设计与仿真、神经网络模拟、金融工程建模等。对于高频交易来说，Matlab常用于基础数据建模，策略挖掘和回测，虽然并不具有直连交易所等功能，但在进行数据分析时Matlab一定是必备的软件。3.3.4其他高频交易工具
<br><br>
<span style="margin-left:25px"></span>此外常见的高频交易工具还有：
<br><br>
<span style="margin-left:25px"></span>博易大师、恒生期货、易盛、金字塔等。不同的交易工具各有自己不同的特色，读者可以逐个体验其优点与缺点。此处不再赘述。第四章常见的高频交易策略
<br><br>
<span style="margin-left:25px"></span>4.1交易策略是高频交易的核心
<br><br>
<span style="margin-left:25px"></span>一个正确的策略会带来不错的收益，加以高频则会成倍的增加收益；
<br><br>
<span style="margin-left:25px"></span>如果是一个错误的策略运行在高频交易上，带来的只有成倍的亏损。高频交易的策略高度依赖于所处交易所的交易细则和交易所的IT架构，针对实际情况而设计的策略才能合理的带来收益。
<br><br>
<span style="margin-left:25px"></span>某些市场流行使用冰山算法：
<br><br>
<span style="margin-left:25px"></span>在市场上如果一个人有大量的买单，那么他的交易对手方得知这个信息后一定会选择相反的方向与他作对，导致价格大幅上升。为了解决这个问题，有的交易所提供了一种针对性的工具，即“冰山订单”。这种订单可以很大，但是只有一小部分是公开出来的，其他的都隐藏在“冰山”之下，除了交易所和下单者之外没有人知道有多少交易量。这样就导致了信息不对称，因此有的用户为了“探测”是否有“冰山”订单，则不断下小订单探测并立即取消，在探测到冰山订单后，说明市场上将有大量的买单出现，价格可能高升，则探测者可以采用截单的方式获取一定的收益。此外高频交易的策略与市场交易细则有关。
<br><br>
<span style="margin-left:25px"></span>国内的股指期货市场在2010年正式推出，此后经历了较多股灾事件。鉴于股灾事件频发，在2015年9月2日，中金所发布了关于股指期货的新政策：一、对股指期货日内开仓数量进行限制；
<br><br>
<span style="margin-left:25px"></span>二、提高股指期货持仓交易保证金比例；
<br><br>
<span style="margin-left:25px"></span>三、提高股指期货平今仓手续费水平。
<br><br>
<span style="margin-left:25px"></span>该政策发布后，股指期货市场震动强烈，很多高频交易公司因限制而离开了股指期货市场，而未离开的公司纷纷修改了自己的高频交易策略，使得自己可以适应新的环境。
<br><br>
<span style="margin-left:25px"></span>这也说明了交易策略要与交易所的交易细则高度相关。综上所述：
<br><br>
<span style="margin-left:25px"></span>交易策略极大的影响了高频交易的实际收益情况，是高频交易的核心部分。4.2常见高频交易策略
<br><br>
<span style="margin-left:25px"></span>4.2.1做市商策略
<br><br>
<span style="margin-left:25px"></span>什么是做市商策略
<br><br>
<span style="margin-left:25px"></span>做市商是指：
<br><br>
<span style="margin-left:25px"></span>在市场上，由实力强大、信誉较好的组织作为特许交易商，针对某商品不断向市场参与人同时提供买入和卖出价格，并根据提供的价格与其他市场参与人进行买卖，使用其拥有的资金和商品与公众进行双向交易。通过做市商机制，任何投资者可以以做市商为交易对手方立刻完成交易。做市商在市场中十分常见，举一个例子：伦敦黄金市场由伦敦五大金商、瑞士三大银行作为做市商。在高频交易策略中有一类策略叫做
<br><br>
<span style="margin-left:25px"></span>“做市商策略（Market Making）”由于该策略由于与传统的做市商类似，即通过赚取买卖价差来获取利润，所以命名为Market Making。做市商策略的理论基础
<br><br>
<span style="margin-left:25px"></span>做市商的主要收益来自于买卖差价。
<br><br>
<span style="margin-left:25px"></span>即同时向买卖双方提供买入卖出价格的差额部分。在大量的出售和买入过程中，逐笔交易积累成交价与理论价格的差价，并根据市场情况与投资者自身持仓情况，动态调整价差大小，进而获得利得收益。一般而言，做市商策略需要经过如下的过程：
<br><br>
<span style="margin-left:25px"></span>首先，根据做市商对商品和市场的理解和分析，确定自己的“理论价格”；然后，根据做市商当日库存、目标库存、持仓情况等计算出可以获利的价差，进而得到买卖报价；最后根据市场当前的活跃程度、做市商自身的资金情况，及时调整双向报价的价格，并进行风险对冲和安全管理。做市商策略是一种被动成交的策略，在策略指定过程中包含如下四部分内容：
<br><br>
<span style="margin-left:25px"></span>基准价、买卖差价、报单量、仓位与风险控制。1、基准价：
<br><br>
<span style="margin-left:25px"></span>基准价一般是根据做市商对商品与市场的理解和分析所确定的“理论价格”。但由于做市商之间对商品的分析能力有差异，因此每一家提出的基准价都是不同的，所以通行的做法是对基准价的确定进行“简化”，在实际操作中，基准价的设置和调整往往采用如下原则：（1）每天的第一个基准价为当日该商品开盘价；（2）在z时点，如果市场当前价格尚在策略的报价范围之内，且做市商策略并未有任何一笔成交记录，则基准价不进行调整；（3）在z时点，如果市场价格达到了策略设计的买卖报价，则按策略的相应报价完成交易；成交后，调整基准价修正为成交价。2、报价价差：
<br><br>
<span style="margin-left:25px"></span>在确定基准价后，基准价减买入报价价差等于买入价；基准价加卖出报价价差等于卖出价。即：基准价-买入报价价差=买入价
<br><br>
<span style="margin-left:25px"></span>基准价+卖出报价价差等于卖出价
<br><br>
<span style="margin-left:25px"></span>报价价差=卖出报价价差+买入报价价差
<br><br>
<span style="margin-left:25px"></span>在实际操作中，报价价差的设置一般采用固定值，并且买入报价价差与卖出报价价差一般相等。
<br><br>
<span style="margin-left:25px"></span>例如：沪铜2017年1月26日开盘价47460元/吨，最小变动价位10元/吨，交易单位5吨/手，保证金为10%。则可以将47460元/吨作为基准价，10元/吨作为买入价差与卖出价差，则报价价差为20元/吨。按此价差计算，如果某投资者在某价差买入一手并成功卖出，获利情况如下：买入成本=47450(元/吨)*5(吨/手)*10%(保证金比例)*1(手)=23725(元)
<br><br>
<span style="margin-left:25px"></span>卖出收益=47470(元/吨)*5(吨/手)*10%(保证金比例)*1(手)=23735(元)
<br><br>
<span style="margin-left:25px"></span>则做市商可以在1手交易中获利10元，通过无数比交易的积累，可以获得大量的收益。
<br><br>
<span style="margin-left:25px"></span>3、报单量：
<br><br>
<span style="margin-left:25px"></span>报单量随着投资者资金大小与风险偏好的不同而不同，在研究过程中我们可以采取简化原则，如单边报单量取1手。其他的取多手的情况，均可以认为是1手*N的复例；4、仓位与风险控制：
<br><br>
<span style="margin-left:25px"></span>做市商策略面对之危险主要有存货风险与信息不对称。针对存货风险来说，在现货市场中，需要有仓库费用，人工费用，减值费用等，而期货市场中，某些商品会有隔夜利息，或者因外盘价格的变动而产生剧烈变动，随着资产价格的变化这部分存货的价格会上下波动，其中将会蕴含大量的风险。信息不对称风险是指如果有知情交易者掌握了做市商不了解的信息，那么意味着做市商报出的价格是错误的，知情交易者可以借此从做市商身上获取利益。因此在做市商策略中，仓位与风险控制是极其重要的部分。针对仓位控制，有一种常用的控制策略如下：设立软控制阈值与硬控制阈值，如果报单量为1手，软限制为5手，硬限制为10手的做市商策略，如果出现了任一方向5手以上的净持仓，则把相反方向上的报单量参数调整为2手，如果出现了任一方向上的净持仓超过10手，则不再买入新的仓位，卖出报单量将持仓量限制在10手以下。事实表明，该策略可以十分有效的将净持仓数量控制在安全范围内。影响做市商策略的因素
<br><br>
<span style="margin-left:25px"></span>影响做市商策略的因素如下：
<br><br>
<span style="margin-left:25px"></span>合约交易活动性；商品价格波动性情况。合约的交易活动性对于做市商策略的影响十分重要，对于交易活动性较为活跃的合约，
<br><br>
<span style="margin-left:25px"></span>其价格变动较为平稳，持仓头寸容易进出，因此固定小幅度买卖价差的交易策略容易实现盈利；反之，对于交易活动性较差的合约，其价格变动一般会呈现跳跃性，并且做市商的持仓头寸进出都较为困难，非常容易产生亏损。商品的波动性情况对于做市商也是十分重要的，一般而言做市商策略适合于震荡行情的市场，而如果市场发生幅度较大的震荡或者较大的单边行情，
<br><br>
<span style="margin-left:25px"></span>都会产生较大的亏损，因此做市商必须区分市场的波动特征，针对不同的波动特征开发不同的做市策略，并且设计相应的监控指标，在市场发生较大变动时及时调整做市策略。据李臻（2015）在《基于做市商策略的股指期货市场自动化交易实证研究》的相关数据分析表明：
<br><br>
<span style="margin-left:25px"></span>在区间震荡的行情内，做市商的收益会随着市场波动率的增大而增加。4.2.2统计套利策略
<br><br>
<span style="margin-left:25px"></span>什么是统计套利
<br><br>
<span style="margin-left:25px"></span>套利(arbitrage)在金融学中的定义为：
<br><br>
<span style="margin-left:25px"></span>同时在两个不同的市场中，买入与卖出相同类型或者有紧密关系的证券或者投资组合的行为。如果在投资组合中包含有金融工具时，该金融工具可以是同类型的或者是不同类型的。统计套利在我国目前处于刚起步阶段，但是在国外投资者中已经得到了充分运用并带来了不错的收益。
<br><br>
<span style="margin-left:25px"></span>它是根据数学统计模型开发的套利策略。通过对资产的历史交易数据进行分析，找寻到资产与资产、资产与时间、资产与季节等事物之间的规律，进而发现潜藏的套利机会。随后会建模设立标准数据模型来模拟投资组合的价格波动。在拟合完毕后，使用计算机程序将交易策略自动化，对市场的实时信息进行处理，自动进行套利交易。统计套利策略是基于模型分析的一种交易方法，当资产的价格与模型分析预测价格产生不一致并且价差达到一定幅度时，
<br><br>
<span style="margin-left:25px"></span>投资者会在市场中同步构建多头仓位和空头仓位，进而通过价差获利（肖卓华，2011）。例如国际市场上的美元黄金负相关套利是一个沿用多年的固定组合；而国内也常用沪铜-伦铜正相关套利、连豆-连豆粕正相关套利、连豆—郑州硬麦正相关套利等策略。统计套利的理论基础
<br><br>
<span style="margin-left:25px"></span>套利交易是一种低风险高收益的交易行为。
<br><br>
<span style="margin-left:25px"></span>套利交易一般可分为三类：跨期套利；跨品种套利；跨市场套利。跨期套利：
<br><br>
<span style="margin-left:25px"></span>是指在相同市场中，同时买入并卖出同一商品的不同到期时间的期货合约，利用不同到期时间合约的价差来获取利润。跨品种套利：
<br><br>
<span style="margin-left:25px"></span>是指在相同市场中，通过两个有差异的，但相关性较强的商品之间的价格差异进行套利。即买进某商品某个到期时间商品合约的同时，卖出其他相关联商品同样到期时间的商品合约。跨市场套利：
<br><br>
<span style="margin-left:25px"></span>即当投资者在发现两个市场间的同一种商品有价格差异，投资者可以在价格较低的市场买进该商品合约，在价格较高的市场卖出相同的商品合约，等待价格恢复正常时平仓，以获取差价利润。常用的统计套利策略有两种：
<br><br>
<span style="margin-left:25px"></span>配对交易与主成分分析法。配对交易是日常交易中很常见的方法，是指在买入做多某种商品时，同时对其他商品进行卖空操作，
<br><br>
<span style="margin-left:25px"></span>并在将来某时刻同时对两种资产进行平仓，获取资产差价利润。这是一种可以避免市场风险的市场中性策略，该策略要求发现市场的错误，进而通过“帮助市场恢复正常”而获取低风险收益。主成分分析法的另一个名字是主分量分析，其名字的来历是可以将众多的指标转变成少量的几个主要指标（即主成分），
<br><br>
<span style="margin-left:25px"></span>将原指标的大部分特征通过最终的主成分不重复、较完整的反映出来。根据主成分分析法，我们可以对资产价格有关的多个因素进行分析，创建数学模型，分析该资产的市场价格与模型预测的价格是否已经偏离了正常的水平，进而通过这个价差获取利润。如果资产的市场价格较模型预测价格低，可认为目前资产价格被低估，投资者可以买入此资产并持有，待资产价格恢复到模型预测的价格水平时再卖出获利。反之则进行相反的操作。目前期货市场上采用短线策略进行投机套利比较盛行；
<br><br>
<span style="margin-left:25px"></span>证券市场上大多是证券经纪商针对指数基金进行套利。统计套利策略被广大投资者大量使用的原因如下：
<br><br>
<span style="margin-left:25px"></span>1、统计套利策略的收益独立于市场行情，市场涨跌对它影响小；
<br><br>
<span style="margin-left:25px"></span>2、统计套利策略的收益波动较小；
<br><br>
<span style="margin-left:25px"></span>3、统计套利策略的收益相对稳定；
<br><br>
<span style="margin-left:25px"></span>但是统计套利策略并非十全十美，它也有自身内在的缺陷：
<br><br>
<span style="margin-left:25px"></span>统计套利的成本居高不下；此外为了防止市场暴跌等恶劣情况的出现，几乎所有的交易所都对卖空有严格的限制，这就使得统计套利策略在实际市场中的使用有较大的局限性（方昊，2005）。影响统计套利策略的因素
<br><br>
<span style="margin-left:25px"></span>影响统计套利策略的主要因素如下：
<br><br>
<span style="margin-left:25px"></span>商品间价格的相关性、过度拟合现象、套利周期的影响。统计套利只能针对价格有极强相关性的商品进行，否则将会导致策略风险过大，价格关系是否稳定直接决定着统计套利能否成立，
<br><br>
<span style="margin-left:25px"></span>因此在统计分析价格关系的历史数据时，必须要检验商品间的价格关系在历史数据中是否稳定。如果商品间的价格关系是稳定的，则必定存在着一种价格关系的维持机制，一旦价格关系偏离开了平均水平，这种维持机制就会起作用，使价格回归到正常水平。所以，要判断一组商品之间的价格是否具有稳定关系，需要先对商品之间是否存在着双方价格的稳定机制进行分析，再对历史数据进行统计分析以验证稳定机制是否存在，最终可以证实维持机制的有效性。过度拟合是指为了得到一致假设而使假设变得过度严格的情况。
<br><br>
<span style="margin-left:25px"></span>在期货市场中常有如下情况出现：投资者设计了一个交易策略，将其投入模拟盘后看到数据的回溯测试收益曲线平滑向上，但投入实盘后却发现效果极差。过度拟合是出现此种问题的一个重要因由。即模型针对纳入统计样本中的数据描述准确率十分高，但是针对统计样本之外的数据，模型却无能为力。过度拟合的原因多是因为当使用模型描述交易系统的过程中，设计者一般会通过多个参数并优化这些参数以寻找最佳的交易系统，如果参数过多或者参数优化过度，那么就会导致模型对回溯数据的模拟精确，但对未来的行情却效果极差。套利周期在统计套利中的影响也十分明显，使用价格偏差回归的套利策略时，
<br><br>
<span style="margin-left:25px"></span>需要的时间跨度难以准确判断，只能根据历史统计或季节性规律大致做一个估计。如果统计周期过长，对投资者的资金使用成本是个较大考验，有较大可能导致套利策略的失败。4.2.3动量策略与反转策略
<br><br>
<span style="margin-left:25px"></span>什么是动量策略和反转策略
<br><br>
<span style="margin-left:25px"></span>动量效应又称为惯性效应，是行为金融学中的重要概念。
<br><br>
<span style="margin-left:25px"></span>所谓动量效应，是指在一个连续的时期内资产价格会表现出一种持续的变动。如果一种资产的价格在过去一段时间内走势比较强，则在将来的一段时间内继续走强的概率较高。因此动量策略就是对过去比较强的资产继续做多，或者对过去比较弱的资产继续做空，期望在未来的时间内获得利润（王帅，2013）。反转效应与动量效应的思路正好截然不同。
<br><br>
<span style="margin-left:25px"></span>该效应是说在前一段时间走势弱的资产，在未来会走势反转变强，而前一段时间走势强的资产，在未来会反转变弱。基于反转效应，投资者可以做出如下投资决策：买入过去价格走势弱的股票、卖出过去价格走势强的股票来获取利润。这种通过利用股票或者商品的反转效应构造的投资策略叫做反转策略。动量策略和反转策略的理论基础
<br><br>
<span style="margin-left:25px"></span>在传统金融理论中，对市场环境和投资者等做了一定的假设条件，例如：
<br><br>
<span style="margin-left:25px"></span>投资者是完全理性的、市场是无摩擦的、市场信息完备等诸多条件。但是在现实市场中并不符合以上假设。投资者会有过于自信、过度恐惧、幸存者误差、框架效应，损失避免等心理倾向，不符合理性人的假设；而市场本身并非无摩擦的，并且市场信息并未能如完全有效市场假设一般透明，消息本身的传播也需要一定的时间才能传播到每一位投资者。对这些金融异常现象的出现原因，行为金融学给出了一些较合理的解释。在股票市场或者期货市场中，动量效应和反转效应是普遍而有趣的现象，有很多技术分析流派据此来预测未来的收益。
<br><br>
<span style="margin-left:25px"></span>关于动量效应与反转效应的产生原因，学术界已尝试从多个方面进行解释：行为金融学派的学者，如 De Bond与 Thaler(1985，1987)， Haugen et a1．(1990)， Lakonishok、 Shleifer与 Vishney(1995)等从人类行为的角度进行解释，认为市场反应不足及过度反应导致了惯性效应与反转效应。Barberis、Shleiffer、Vishny（1998）提出了一个观点如下：短期内的股价具有一定的价格惯性效应，该现象是因为投资者具有保守性偏差，导致新信息出现时投资者的反应不足；同时投资者也具有以偏概全的心理倾向，该倾向可能会诱使投资者在新信息出现时产生超出合理程度的过度反应，接下来就会使得股价反转现象出现。假设参与到市场交易的交易者存在如下类型：知情者和非知情者。信息事件发生时，知情者拥有内幕信息并开展交易，而非知情者一般对内幕信息的响应不及时，此时动量效应就会表现在股价的走势上。此后信息将会在投资者中缓慢传播，信息将慢慢融入市场，随着知情者在市场中所占份额的增加，动量效应慢慢降低直至消失。此后投资者甚至会因为过度解读了新信息的影响力度而使股价出现突然反转现象。动量策略和反转策略是近年来市场研究中最受关注的金融异常现象，有无数金融学者对此展开了研究。
<br><br>
<span style="margin-left:25px"></span>学术界认识到经典的资本资产定价模型CAPM不能完全解释动量投资策略可以产生收益的原因。因此，人们开始寻找其他能够解释动量策略可以产生收益的理论。通过金融学者们的不断研究和探索，行为金融理论逐渐成型。该理论可以较为完善的解释动量效应与反转效应的产因。影响动量效应和反转策略的因素
<br><br>
<span style="margin-left:25px"></span>假设如行为金融学所提出的解释：
<br><br>
<span style="margin-left:25px"></span>动量效应产生的原因是投资者群体内部具有信息不对称的现象，并且信息在投资者间会逐渐传播。那么信息的传播速度一定会与动量效应有紧密关联。信息在投资者之间的传播速度越大，就会导致动量效应的能量衰竭的越快。因此，信息扩散程度的大小会直接影响动量效应的持续时间长度大小以及动量效应带来收益的大小。影响信息扩散的因素有：交易知情者在所有交易参与者中所占的比例、信息在交易者之间的传播速度、交易者对突发信息的理解并运用能力。显然，我们可以做如下推论：交易知情者的占比越大，动量效应消失的越快，带来的收益越少；
<br><br>
<span style="margin-left:25px"></span>信息在交易者之间传播速度越快，动量效应消失的越快，带来的收益越少；
<br><br>
<span style="margin-left:25px"></span>信息吸收程度越大，动量效应消失的越快，带来的收益越少；
<br><br>
<span style="margin-left:25px"></span>第五章影响高频交易策略的因素汇总
<br><br>
<span style="margin-left:25px"></span>5.1高频交易策略的评价方法
<br><br>
<span style="margin-left:25px"></span>5.1.1策略年化收益率
<br><br>
<span style="margin-left:25px"></span>策略年化收益率（ Annualized Returns）表示投资期限为一年的预期收益率，
<br><br>
<span style="margin-left:25px"></span>是把当前收益率（日收益率、周收益率、月收益率）通过日期叠加而换算成的年收益率，它是一种理论收益率而非实际已经发生的收益率。例如日收益率是0.01%，则年化收益率为365*0.01%=3.65%。因为年化收益率是变动的，所以实际收益率和年化收益率之间会有一定的差距。年化收益率指标的设立目的是为投资者提供比较直观的数据，供投资者将不同的投资项目进行比较与参考。5.1.2最大回撤率
<br><br>
<span style="margin-left:25px"></span>最大回撤率（Max Drawdown）的概念如下：
<br><br>
<span style="margin-left:25px"></span>在指定周期内任一时间节点开始，计算产品净值最低时的收益回撤幅度，取收益回撤幅度的最大值。最大回撤比率是一个策略可能面对的最差情形。回撤率能够用来估算任一投资者可能遇到的最严重损失。关注策略的最大回撤率可以帮助投资者了解该策略的风险控制能力，同时也能够了解投资者自身会遇到的最严重损失。目前对最大回撤率的主流认识有两点：
<br><br>
<span style="margin-left:25px"></span>a)同等收益率下最大回撤越小越好；
<br><br>
<span style="margin-left:25px"></span>b)回撤和风险成正比，回撤率越大，风险越大，回撤率越小，风险越小；
<br><br>
<span style="margin-left:25px"></span>一般而言某个策略的最大回撤率越大，意味着该策略的风险较高。
<br><br>
<span style="margin-left:25px"></span>但并非最大回撤率越小越好，往往高收益的产品会伴随着高风险匹配，而风险偏好的投资者会对这些产品青睐有加。最大回撤率的计算方法可以用如下过程描述：
<br><br>
<span style="margin-left:25px"></span>设D为某一天的净值，i为某一天，j为从i开始算起的之后一天，Di为第i天的策略净值，而Dj为第j天的策略净值，则公式如下：Drawdown = max (Di-Dj)/Di
<br><br>
<span style="margin-left:25px"></span>即分别求得每一天净值的回撤率，然后求回撤率的最大值。
<br><br>
<span style="margin-left:25px"></span>在高频交易中，交易数据可能是按照“时、分、秒、每笔交易”来计算，则此处的回撤率也可以使用“时、分、秒、每笔交易”来计算。5.1.3夏普比率
<br><br>
<span style="margin-left:25px"></span>夏普比率（Sharpe Ratio），又称为夏普指数。
<br><br>
<span style="margin-left:25px"></span>在投资活动中有一个显著的特点：随着投资标的的预期收益率升高，投资人所愿意承担的风险就越高；反之随着投资标的的预期收益率降低，投资人所愿意承受的风险就越低。因此说理性的投资人会做出如下的投资决策：在固定承担的风险范围内，追求投资的收益最大化；或者在固定的收益内追求最低的风险。夏普理论告诉我们，需要用最小的风险来换取最大的回报，因此投资者要避免一些不值得冒的风险，
<br><br>
<span style="margin-left:25px"></span>同时如果投资者如果缺乏投资经验与研究时间，可以让专业人士来帮助自己建立一些合适的投资组合。夏普比率可以对这些投资组合来评估风险和回报的比率。夏普比率的计算公式如下：
<br><br>
<span style="margin-left:25px"></span>SharpeRatio =( E(Rp)-Rf)/ σp
<br><br>
<span style="margin-left:25px"></span>其中：
<br><br>
<span style="margin-left:25px"></span>E(Rp)为投资组合预期报酬率Rf为无风险利率，一般取一年期国债利率
<br><br>
<span style="margin-left:25px"></span>σp为投资组合的标准差
<br><br>
<span style="margin-left:25px"></span>尽管夏普比率的计算和使用十分容易，但是它也具有一些需要注意的问题：
<br><br>
<span style="margin-left:25px"></span>夏普比率没有基准点，因此其数值本身无特殊含义，唯有在组合与组合的比较中才能发挥夏普比率的用途；人们认为夏普比率使用标准差作为风险指标并不能完全代替“风险”本身的含义；夏普比率是线性的，但是收益与风险之间的变换并非简单的加法与乘法，这会导致夏普比率在衡量标准差较大的产品时可能发生错误；夏普比率可以衡量组合的历史表现，但历史表现并不能说明未来会与过去完全相同；此外夏普指数并不稳定，如果统计区间不同就会导致夏普指数计算出不同的结果。虽然夏普比率有以上的问题，但是由于计算简单、假设条件少、使用方便等原因得到了大量推广。
<br><br>
<span style="margin-left:25px"></span>5.1.4詹森指数
<br><br>
<span style="margin-left:25px"></span>詹森指数这种指标可以用来测定证券组合的绩效。
<br><br>
<span style="margin-left:25px"></span>该指数是证券组合的实际期望收益率与位于证券市场线上的证券组合的期望收益率之差。该指标计算了一个时期内证券组合实际收益率与由资本资产定价模型得出的预期收益率之间的差额，即证券组合的实际收益超出它预期收益的差额，这个差额就是基金经理的工作所带来的额外利润。因此詹森指数越大代表证券组合实际收益越好，如果詹森指数小于零，则说明证券组合的表现与市场投资组合的收益率相比较差。詹森指数的计算公式如下：
<br><br>
<span style="margin-left:25px"></span>詹森指数=Ri，t—[Rf，t+βi(Rm，t-Rft)]
<br><br>
<span style="margin-left:25px"></span>在此公式中：
<br><br>
<span style="margin-left:25px"></span>Rm，t代表了市场投资组合在t所代表的时间点的预期收益率；
<br><br>
<span style="margin-left:25px"></span>Ri，t为i证券组合在t所代表的时间点的实际收益率；
<br><br>
<span style="margin-left:25px"></span>Rf，t为t所代表的时间点的无风险收益率（一般取无风险国债利率）；
<br><br>
<span style="margin-left:25px"></span>βi为证券组合的系统风险。
<br><br>
<span style="margin-left:25px"></span>5.1.5市场容量
<br><br>
<span style="margin-left:25px"></span>在高频交易的实际操作中会遇到一个常见的问题：
<br><br>
<span style="margin-left:25px"></span>某个策略在资金量小时收益稳定运行正常，但资金量增加时就会发生亏损。这是因为策略可容纳的资金量是有限的，当资金量较小时，策略对市场的影响可以忽略不计，策略可以正常运行，如果资金量增大时，策略本身就会对市场造成扭曲，导致策略运行的市场环境产生一定的变化，策略就会不可避免的产生亏损。市场容量是一个偏实际应用的问题，一般策略的最大资金容量很难说出准确的数字是多少，但毫无疑问的，市场容量是客观存在的，股指期货高频交易策略通常容量几千万，资金再多时收益率就会开始下降。因此对交易策略的又一评估标准为该交易策略能容纳多少资金。
<br><br>
<span style="margin-left:25px"></span>影响策略可容纳资金容量的因素有如下几点：
<br><br>
<span style="margin-left:25px"></span>策略本身的逻辑、策略交易频率、策略交易品种的日内总成交量和总持仓量、策略交易品种的瞬时挂单量、资金的风险偏好等。策略本身的逻辑对容量的影响是巨大的，事件驱动模型和量化对冲策略可容纳的资金容量在10亿以上，
<br><br>
<span style="margin-left:25px"></span>一般统计套利交易模型的市场容量可以达到1亿以上，期现套利模型则可以容纳30亿以上的资金，量化交易如果运用于某个证券或者某个资产时，其资金容量与证券或者资产本身的情况有关（期货日报，2015）。策略交易频率对容量的影响也比较大，一般而言交易频率越高，市场上可供交易的交易对手就越少，
<br><br>
<span style="margin-left:25px"></span>能成交的资金也越少，因此短线交易的资金容量往往会非常少。策略交易品种的日内总成交量和总持仓量对资金容量的影响是正向的，交易品种的日内总成交量和总持仓量越大，
<br><br>
<span style="margin-left:25px"></span>则能容纳的资金容量越大。由于市场容量限制的存在，高频交易中必须针对每一个策略设置资金限制，避免因市场容量不足而导致的策略亏损。
<br><br>
<span style="margin-left:25px"></span>5.2共性影响因素
<br><br>
<span style="margin-left:25px"></span>5.2.1市场大小对交易容量的影响
<br><br>
<span style="margin-left:25px"></span>市场大小是指市场中某商品的成交额与成交量的大小，衡量商品成交量大小的指标有很多，例如：
<br><br>
<span style="margin-left:25px"></span>单日总成交额、单日总成交量等。一般而言，单日总成交额和单日总成交笔数越大，称之为市场比较大。很显然交易容量大小的决定性素是市场自身的大小：
<br><br>
<span style="margin-left:25px"></span>表5.12017-01-26上期所与郑期所部分商品合约数据
<br><br>
<span style="margin-left:25px"></span>品种今开盘收盘价成交量持仓手
<br><br>
<span style="margin-left:25px"></span>沪铜1703 47460.00 48040.00 188630159580
<br><br>
<span style="margin-left:25px"></span>沪铝1703 13965.00 13835.00 280242233714
<br><br>
<span style="margin-left:25px"></span>沪锌170322710.00 23205.00 377530159562
<br><br>
<span style="margin-left:25px"></span>沪铅170318750.00 19015.00 6389234952
<br><br>
<span style="margin-left:25px"></span>沪金1706269.60 267.60 142822318662
<br><br>
<span style="margin-left:25px"></span>沪银17064073.00 4025.00 396474641770
<br><br>
<span style="margin-left:25px"></span>沪钢17053292.00 3369.00 18960022254872
<br><br>
<span style="margin-left:25px"></span>郑麦17052994.00 3006.00 2098--
<br><br>
<span style="margin-left:25px"></span>郑棉170515620.00 15665.00 95640--
<br><br>
<span style="margin-left:25px"></span>郑玻17051315.00 1323.00 192204--
<br><br>
<span style="margin-left:25px"></span>数据来源：
<br><br>
<span style="margin-left:25px"></span>期货日报从成交量分析，商品的成交量排名前三的商品如下：
<br><br>
<span style="margin-left:25px"></span>沪钢（1896002手）]沪银（396474手）]沪锌（377530手）
<br><br>
<span style="margin-left:25px"></span>成交量代表着市场上的交易活跃程度，成交量大则意味着两点：
<br><br>
<span style="margin-left:25px"></span>一是买方和卖方数量众多；二是此时的商品价格与双方的心理预期一致。由于这两个因素，投资者在一个成交量大的商品中寻找交易对手方显然要容易的多，并且在成交量大的商品中交易意味着投资者面对的是一个“大致达成一致的价格”。成交额也是不得不考虑的一个方面。
<br><br>
<span style="margin-left:25px"></span>由于上期所和郑期所并未正式公布单日成交额，因此我们采用如下公式来计算成交额：成交额=交易单位*合约报价单位*成交量*收盘价*最低保证金比例
<br><br>
<span style="margin-left:25px"></span>表5.22017-01-26上期所与郑期所部分商品合约成交额
<br><br>
<span style="margin-left:25px"></span>商品合约交易单位报价单位成交量收盘价保证金成交额（万元）
<br><br>
<span style="margin-left:25px"></span>沪铜1703 5吨/手元/吨18863048040.00 11%498，391
<br><br>
<span style="margin-left:25px"></span>沪铝1703 5吨/手元/吨28024213835.00 11%213，243
<br><br>
<span style="margin-left:25px"></span>沪锌17035吨/手元/吨37753023205.00 11%481，832
<br><br>
<span style="margin-left:25px"></span>沪铅170325吨/手元/吨6389219015.00 11%334，099
<br><br>
<span style="margin-left:25px"></span>沪金17061000克/手元/克142822267.60 10%382，191
<br><br>
<span style="margin-left:25px"></span>沪银170615千克/手元/千克3964744025.00 11%263，308
<br><br>
<span style="margin-left:25px"></span>沪钢170510吨/手元/吨18960023369.00 11%702，639
<br><br>
<span style="margin-left:25px"></span>郑麦170520吨/手元/吨2，0983006.00 10%1261
<br><br>
<span style="margin-left:25px"></span>郑棉17055吨/手元/吨95，64015665.00 10%74，910
<br><br>
<span style="margin-left:25px"></span>郑玻170520吨/手元/吨192，2041323.00 10%50，857
<br><br>
<span style="margin-left:25px"></span>来源：
<br><br>
<span style="margin-left:25px"></span>作者计算从成交额分析，商品的成交量排名前三的商品如下：
<br><br>
<span style="margin-left:25px"></span>沪钢（702639万元）]沪铜（498391万元）]沪锌（481832万元）
<br><br>
<span style="margin-left:25px"></span>成交额可以直观的体现出该商品可以容纳的资金容量。
<br><br>
<span style="margin-left:25px"></span>如果我们假设对某个商品投入的资金量对大盘的扰动是下图的关系：图5.1对单个商品投入的资金占该商品当日成交额的比率与市场扰动关系
<br><br>
<span style="margin-left:25px"></span>我们简单假设存在一个临界点P，如果单个商品投入的资金占该商品当日成交额的比率在此比率之下，则市场不会收到扰动，则既定的交易策略可以不受阻碍的实现；
<br><br>
<span style="margin-left:25px"></span>如果单个商品投入的资金占该商品当日成交额的比率超过了P点则市场会受到扰动，使原本符合既定交易策略的市场环境不复存在，进而造成亏损。关于此P点的值是一个偏实践性的数值，并没有精确的方法可以去计算出一个标准的值供大家参考。
<br><br>
<span style="margin-left:25px"></span>并且对此P点的见解有很大的争论，部分投资者的投资策略是力争对市场无扰动，使得投资策略可以在市场稳定的情况下获得应有收益；而另一部分投资者会考虑如何突破P点，对市场进行充分的扰动，然后在扰动中进行获利。这也可以从另一方面解释在中国股票市场或者其他市场尚未发展完全的时代，为什么价值投资性的股票偏向与大盘股，而游资性的资金喜欢小盘股。以上的数据来源于期货市场，但是得出的结论也适用于其他的市场，如股票市场、外汇市场、期权市场等。
<br><br>
<span style="margin-left:25px"></span>5.2.2交易成本对于高频交易的影响
<br><br>
<span style="margin-left:25px"></span>交易成本（Transaction Cost）的概念如下：
<br><br>
<span style="margin-left:25px"></span>在交易成功结束后，交易双方所产生的与此交易相关的各项成本或者花销。此成本并非仅仅指与货币有关的成本，而且也包含了时间成本、机会成本等。在1975年Williamson指出交易成本可以区分为如下几项内容：信息成本；搜寻成本；决策成本；议价成本；违约成本和监督成本。1985年Williamson将交易中发生的成本分类为事前成本与事后成本两个类型：事前成本包含谈判、签合同与保障等；事后成本含契约不能适用而导致的成本。高频交易的交易成本种类比较多，我们可以总结为如下几类：
<br><br>
<span style="margin-left:25px"></span>准入资格成本、交易费用成本、软硬件设备成本、附属运营成本。准入资格成本是指进入高频交易交易门槛的成本。
<br><br>
<span style="margin-left:25px"></span>高频交易有多种形式，初级的可以采用第三方系统的方式，例如交易开拓者、金字塔、文华赢顺等软件，如果资金量允许且对性能有较高要求可以采用上期所 CTP，而互联网+的盛行又诞生了一些基于互联网量化交易平台。仅从费用方面考量：表5.3不同接入方式的准入费用
<br><br>
<span style="margin-left:25px"></span>接入方式准入费用
<br><br>
<span style="margin-left:25px"></span>交易开拓者期货账户入金10万，交易费用按交易所费用的25%比例收费
<br><br>
<span style="margin-left:25px"></span>文华盈智按年收费，1800元/年
<br><br>
<span style="margin-left:25px"></span>金字塔决策交易系统按年与模块收费，标准版2800元/年，机构版28000元/年
<br><br>
<span style="margin-left:25px"></span>上期所CTP 不同期货公司的价格不同，笔者所在的期货公司要求账户入金100万
<br><br>
<span style="margin-left:25px"></span>数据来源：
<br><br>
<span style="margin-left:25px"></span>相关公司询价在费用方面，不同的接入方式费用差距很大，这是在进入高频交易领域时不得不考虑的一点。
<br><br>
<span style="margin-left:25px"></span>投资者可以从多个方面来综合考量：初始资金是否充足、收费方式倾向于按年收费或者按交易收费、是否有独立模块需求、是否有自行研发交易系统的能力、学习并掌握此系统所需的时间成本等。交易费用成本是指每发生一次交易所需要付出的手续费成本。
<br><br>
<span style="margin-left:25px"></span>此成本与多个因素有关：商品种类、期货公司或证券公司优惠、交易系统成本等方面构成。我们假设所有投资者的议价能力是一致的，可以从期货公司以及软件提供商处得到一致的最低的优惠（实际操作中上一般是交易费用的25%左右，
<br><br>
<span style="margin-left:25px"></span>即实际付出成本=期货公司收取佣金+软件供应商佣金+交易费用=1.5*交易费用，此处的参数1.5会随着期货公司不同而不同），那么交易成本主要体现在交易费用上，参见表5.4。表5.42017-01-26不同商品合约的交易手续费数据
<br><br>
<span style="margin-left:25px"></span>商品合约交易所交易手续费
<br><br>
<span style="margin-left:25px"></span>沪铜17030.5%%
<br><br>
<span style="margin-left:25px"></span>沪铝17033元/手
<br><br>
<span style="margin-left:25px"></span>沪锌17033元/手
<br><br>
<span style="margin-left:25px"></span>沪铅17030.4%%，平今仓免费
<br><br>
<span style="margin-left:25px"></span>沪金170610元/手
<br><br>
<span style="margin-left:25px"></span>沪银17060.5%%
<br><br>
<span style="margin-left:25px"></span>沪钢17051%%
<br><br>
<span style="margin-left:25px"></span>郑麦17052.5元/手
<br><br>
<span style="margin-left:25px"></span>郑棉17056元/手
<br><br>
<span style="margin-left:25px"></span>郑玻17053元/手
<br><br>
<span style="margin-left:25px"></span>数据来源：
<br><br>
<span style="margin-left:25px"></span>交易所官网数据可以看到不同种类的商品的交易所交易手续费是不同的，我们可以根据投资者的实际计划投资金额来计算，
<br><br>
<span style="margin-left:25px"></span>如果可投资金额为40万，计划投资25%到市场中，即购买10万元保证金的商品，则需要付出的手续费如下：表5.52017-01-26投资金额为100000元，最终付出的手续费
<br><br>
<span style="margin-left:25px"></span>商品合约手续费率收盘价单位保证金一手金额购买费用
<br><br>
<span style="margin-left:25px"></span>沪铜17030.5%%48040511%26422336.03
<br><br>
<span style="margin-left:25px"></span>沪铝17033元/手13835511%7609.251339
<br><br>
<span style="margin-left:25px"></span>沪锌17033元/手23205511%12762.75721
<br><br>
<span style="margin-left:25px"></span>沪铅17030.4%%190152511%52291.25119.02
<br><br>
<span style="margin-left:25px"></span>沪金170610元/手267.6100010%26760330
<br><br>
<span style="margin-left:25px"></span>沪银17060.5%%40251511%6641.251545.28
<br><br>
<span style="margin-left:25px"></span>沪钢17051%%33691011%3705.92687.59
<br><br>
<span style="margin-left:25px"></span>郑麦17052.5元/手30062010%60121640
<br><br>
<span style="margin-left:25px"></span>郑棉17056元/手15665510%7832.51272
<br><br>
<span style="margin-left:25px"></span>郑玻17053元/手13232010%264637111
<br><br>
<span style="margin-left:25px"></span>数据来源：
<br><br>
<span style="margin-left:25px"></span>作者计算从表中可以看到，使用同等量的资金购买不同商品的手续费千差万别，甚至会有5倍的差距（郑玻与沪铅）。
<br><br>
<span style="margin-left:25px"></span>在高频交易中交易数量极大，交易费用往往会是一个天文数字。因此投资者在做交易时必须考虑手续费对交易利润的影响，目前业内对手续费有如下处理方式：a)认可交易手续费为必须成本；b)投资者采用期货公司返佣等方法减免手续费；5.2.3交易延时对于高频交易的影响
<br><br>
<span style="margin-left:25px"></span>表5.6国内期货市场行情数据发布频率
<br><br>
<span style="margin-left:25px"></span>期货市场系统名称行情数据发布频率
<br><br>
<span style="margin-left:25px"></span>上海期货交易所上期所CTP2次/秒
<br><br>
<span style="margin-left:25px"></span>郑州商品交易所郑州易盛2次/秒
<br><br>
<span style="margin-left:25px"></span>大连商品交易所大连飞创基本行情2次/秒
<br><br>
<span style="margin-left:25px"></span>Level-2行情4次/秒
<br><br>
<span style="margin-left:25px"></span>延时行情2次/秒
<br><br>
<span style="margin-left:25px"></span>中国金融期货交易所中金所飞马系统4次/秒
<br><br>
<span style="margin-left:25px"></span>数据来源：
<br><br>
<span style="margin-left:25px"></span>各交易所官网上期所CTP接口由于启动时间较早、功能完善，且同时支持四大期货交易所，所以运用范围比较广泛。
<br><br>
<span style="margin-left:25px"></span>中金所的飞马系统由中金所技术公司研发，仅能支持中金所的股指期货与国债期货，但由于其系统部署在数讯机房，物理位置较优（上期所在张江机房，中金所在数讯机房，物理上数讯机房更加靠近中金所）。经飞马系统的实地测试，一笔交易单的传输时间能够保证在三毫秒以内，从速度方面评估，飞马系统与其他系统相比有较大的优势。图5.2上海各机房物理部署，来源于中金所飞马系统官网
<br><br>
<span style="margin-left:25px"></span>对于高频交易来说，无论是做市或者套利，速度都是十分重要的因素。
<br><br>
<span style="margin-left:25px"></span>如果使用做市商策略，则交易目标是在尽可能短的时间内完成一个回合的交易，这样可以使市场风险降到最低，否则价格有可能会朝着不利于做市商的方向发展。投资者尽可能的完成一个回合的交易，这自然带来的要求就是提高交易的速度。此外，作为高频交易者，与其他高频交易者也存在着竞争关系：能够比对方更快发出指令的交易商，哪怕只快一毫秒，都可以抢先把订单发布出去或者成交。当使用套利策略时，速度同样十分重要，尤其是在高频交易者竞争激烈的市场上，套利机会将在几百毫秒内出现后就被其他高频交易者拿下，在这种情形下，第一时间发现这些机会，就意味着能够通过这个机会获得利润。因此高频交易的发展目标始终是
<br><br>
<span style="margin-left:25px"></span>“要力争比竞争对手更快”，使信息滞后度达到最低。其中最重要的策略就是“主机托管”，此处我们展示某高频交易软件厂商的主机托管说明。图5.3某高频交易软件厂商的主机托管说明
<br><br>
<span style="margin-left:25px"></span>目前国内高频交易软件厂商众多，但毫无疑问的是每家公司都尽可能提供了“主机托管服务”，使高频交易者的计算机与交易所相应的计算机尽可能的靠近，
<br><br>
<span style="margin-left:25px"></span>这样可以减少电子信号进出交易所所耗费的时间。由于电子信号以光速传播，主机托管的优势对于普通交易者来说并不显著，但是信号沿光纤传播的速度为每公里5.5微妙，高频交易者的服务器与交易所的距离每减少100公里，单向的信号传输时间就会减少550微妙，双向速度将减少1 ms。在高频交易中，1ms的时间差已经足够甩开竞争对手。尤其我国国土面积辽阔大纵深的情况，如果有一名高频交易者在西安开展他的股指期货高频交易事业，就必须面对西安到上海的距离问题。西安到上海的直线距离是1200公里，意味着这位西安的高频交易者每笔交易都会有24ms的交易延时，这在高频交易中将会带来惨重的损失。如果该高频交易者租用了托管机房，则可以极快的获取最新的数据信息，比其他的交易者更快的下单与成交。5.3个性影响因素
<br><br>
<span style="margin-left:25px"></span>5.3.1影响做市商策略的因素分析
<br><br>
<span style="margin-left:25px"></span>在上一章节描述到，影响做市商策略的因素如下：
<br><br>
<span style="margin-left:25px"></span>商品价格的波动性特征、合约的交易活动性。商品价格的波动性特征有很多方面来描述，据相关研究，左偏以及尖峰胖尾特征在我国商品期货市场较为明显；
<br><br>
<span style="margin-left:25px"></span>同时我国的期货价格波动情况具有一定的长记忆性与聚集性；此外经数据统计分析，国内商品期货与国外商品期货之间具有高度的相关性。且从时间序列的分析结果来看，国内商品期货近年来对国外相关品种的波动溢出能力都在逐年变强（吴晓雄，2015）。商品价格的波动性特征主要体现在如下方面：
<br><br>
<span style="margin-left:25px"></span>偏向性、聚集性、长记忆性、跳跃性、周期性。偏向性是指商品价格总体上是否有不断增长的历史趋势。
<br><br>
<span style="margin-left:25px"></span>长期而言，部分商品总体上有不断增长的历史趋势，其原因可以归结为资源的不可再生和通货膨胀的影响；聚集性是指商品的波动是否密集，相关实证分析表明中国期货市场的价格波动具有明显的聚集性；
<br><br>
<span style="margin-left:25px"></span>1951年水文学家赫斯特(Hurst)提出了时间序列存在长记忆性。
<br><br>
<span style="margin-left:25px"></span>许多时间序列呈现出相距时间较长的观测值之间仍然存在不可忽略的相关性的特征，一般将这种特征称为时间序列的长记忆性或长期相关性。据相关实证结果表明中国股市波动性过程具有明显的长期记忆特征（王春峰， 张庆翠，2014），而中国期货市场的商品价格波动长期记忆性也十分明显。跳跃性是指商品会突发性的在短时间内发生一个较大的价格变动。
<br><br>
<span style="margin-left:25px"></span>周期性是指商品价格的运行具有相对稳定的重复性。
<br><br>
<span style="margin-left:25px"></span>该特征的周期具有变异性，受市场情绪影响。它并不是简单的重复，而是会受到投资者心理和情绪的影响而变动。交易活跃性有多种衡量标准，例如：
<br><br>
<span style="margin-left:25px"></span>成交金额、换手率、成交量。在期货市场中多用成交金额与成交量来衡量商品合约是否活跃。成交金额是当日每笔成交订单的交易金额的总和；
<br><br>
<span style="margin-left:25px"></span>成交量是当日成交订单的总手数；
<br><br>
<span style="margin-left:25px"></span>在期货市场上做市商策略受波动性特征和交易活跃性的影响主要体现在如下方面：
<br><br>
<span style="margin-left:25px"></span>由于偏向性的周期较长（因通货膨胀的影响，往往会与经济周期相同），因此在期货市场上一般可以近似认为商品短期内无偏向性；
<br><br>
<span style="margin-left:25px"></span>商品价格波动的聚集性比较明显，意味着做市商策略必须主动适应较剧烈的长期的波动；长记忆性意味着做市商策略必须从历史数据中分析当前市场的变动（这也是技术流派的用武之地）；跳跃性意味着做市商策略必须谨慎处理价格的突发变动；周期性意味着做市商策略必须对商品的运行周期进行掌握与分析，并熟知国内外商品的产量与环境变化等影响。5.3.2影响统计套利策略的因素分析
<br><br>
<span style="margin-left:25px"></span>在上一章节描述到，影响统计套利策略的主要因素如下：
<br><br>
<span style="margin-left:25px"></span>商品间价格的相关性、过度拟合现象、套利周期的影响。商品期货之间的相关性研究用相关系数表示，是一种用来反映变量之间相关关系密切程度的统计指标。
<br><br>
<span style="margin-left:25px"></span>相关系数的计算公式如下：相关系数=E([X-E(X)][Y-E(Y)])/[根号D（X）*根号D（Y）]
<br><br>
<span style="margin-left:25px"></span>图5.4各个期货商品之间的相关性，图片来源和讯金融实验室
<br><br>
<span style="margin-left:25px"></span>相关系数的取值范围为[-1，+1]之间。
<br><br>
<span style="margin-left:25px"></span>当取值为1 时，代表两组变量是完全正相关的；当取值为-1 时，代表两组变量是完全负相关的；r越靠近0轴，两组变量间相关性越弱。一般来说，取值的绝对值在0.66以上属于高度相关。取值的绝对值介于0.33至0.66间属于弱相关。取值的绝对值介于0至0.33间属于相关性不显著。图5.4中可以看到，高度相关的商品有如下组合：
<br><br>
<span style="margin-left:25px"></span>焦炭J与焦煤JM的相关性系数为0.95
<br><br>
<span style="margin-left:25px"></span>铁矿石i与螺纹钢的相关性系数为0.95
<br><br>
<span style="margin-left:25px"></span>棕榈P和豆油Y的相关性系数为0.88
<br><br>
<span style="margin-left:25px"></span>菜粕RM和豆粕M的相关系数为0.84
<br><br>
<span style="margin-left:25px"></span>聚丙烯PP和塑料L的相关系数为0.82
<br><br>
<span style="margin-left:25px"></span>铜CU和锌ZN的相关系数为0.66
<br><br>
<span style="margin-left:25px"></span>套利的基本形式有两种：
<br><br>
<span style="margin-left:25px"></span>价差套利和比价套利。所谓价差套利是计算某商品在同一时期的价格之间的差价，并且通过计算的数据生成时间序列图，分析价差，寻找合理的价差范围，超出合理的价差变动范围时则卖出价格较高的商品并买入价格较低的商品，待日后价格恢复正常水平后获利了结。而比价套利与差价套利基本类似，通过历史数据计算出相关的期货品种在相同时期的价格比值即比价，并将计算出的比价值画作时间序列图，通过分析比价的内在规律来计算正常的比价数值。当比价远离正常的数值时，可以卖出价格高的商品并买入价格低的商品，待日后价格比值达到正常水平平仓以获取利润。选择一个相关系数较高的产品组合开展统计套利交易，毫无疑问商品的价格会更快的恢复正常水平，
<br><br>
<span style="margin-left:25px"></span>使得价格向不利方向发展的风险降到最低。与此同时，我们还需要注意到另一个方面，高相关性的商品价格出现不一致的概率较低，并且不一致的幅度较小，该情况会导致风险最低的时候利润也会最低，这也是在做商品程序化时不得不考虑的内容。过度拟合是指为了得到一致假设而使假设变得过度严格的情况，即对于样本数据，描述的准确度很高，而对于样本外数据，描述的准确度却很差。
<br><br>
<span style="margin-left:25px"></span>在期货市场中重点表现为如下形式：高频交易者往往会设计一个交易时机筛选条件，在符合这个筛选条件的时机下单会带来较大利润。这个筛选条件的表现形式是一个N维的函数，返回值为该时机所对应的操作如买入开仓、卖出开仓、平仓等。为了使这个筛选条件更加符合历史数据，高频交易者往往会通过计算机程序对此筛选条件的 N个参数进行优化，使这个筛选条件在面对历史数据时可以表现到最好，可以把每一个交易时机都筛选出来。如果高频交易者在最后的优化步骤时优化次数过于严格，就会导致筛选条件对历史数据是高度拟合的，但是对于未来的数据却无法捕捉到交易时机。出现过度拟合的原因大致有如下原因：
<br><br>
<span style="margin-left:25px"></span>建模样本抽取错误、样本里的噪音数据干扰过大、建模时的“逻辑假设”到了模型应用时已经不能成立、参数太多模型复杂度高等。而解决过度拟合的原因也有如下几种方式：a)清洗噪音数据，通过增加时间周期将数据平稳化；
<br><br>
<span style="margin-left:25px"></span>b)避免使用过老的数据
<br><br>
<span style="margin-left:25px"></span>c)使用简单的模型；
<br><br>
<span style="margin-left:25px"></span>d)将数据分为训练数据集与测试数据集，使用在测试数据集上产生最小误差的优化参数；
<br><br>
<span style="margin-left:25px"></span>5.3.3影响动量策略与反转策略的因素分析
<br><br>
<span style="margin-left:25px"></span>在上一章节描述到，影响做动量策略与反转策略的因素如下：
<br><br>
<span style="margin-left:25px"></span>交易知情者在所有交易参与者中所占的比例、信息在交易者之间的传播速度、交易者对突发信息的理解并运用能力。行为金融学中提出了动量效应理论：
<br><br>
<span style="margin-left:25px"></span>如果某一个股票在过去一段时间内价格走势较强，那么将来的一段时间内其期望的价格走势也会较强；相反，如果某一个股票的价格走势较弱，那么可以预期将来一段时期内其价格走势也会较弱。因此基于动量效应，投资者就可以买进收益率高的商品，卖出收益率低的商品，以期待动量效应促使收益率高的商品继续走高，促使收益率的商品继续走低，这便是动量交易策略。De Long，Shleifer，Summers和Waldmann提出了DSSW模型，该模型利用正反馈交易行为说明了反应过度现象（Long J B D等，1990）。
<br><br>
<span style="margin-left:25px"></span>技术分析是市场上不能忽略的重要组成部分，他们热衷于使用“图形形态”来解析价格走势，根据K线走势来判断后市行情。技术分析的最终结果就是促使交易者更倾向于购买最近价格有不错涨幅的股票，也促使交易者在遇到有一定跌幅的股票时会全力抛售。这种“追涨杀跌”行为将会在相同方向上加剧股票的波动，即让涨势较好的股票继续上涨，让跌势较大的股票继续下跌。然而当股价被一再推高到某个极限值(或者下跌到某个极限值)之后，股价的泡沫必然会无以为继，从而开始反转。此外Berberis，Shleifer和Vishny(1998)认为投资者有存在两种普遍的决策偏差：一是代表性偏差( representativebias)，投资者会更关注近期数据的变化，他们会有一种偏好，喜欢根据市场最近的价格波动情况总结一种“运行模式”，如果投资者在今后的交易中再次发现这种“运动模式”，投资者容易产生偏差，认为自己总结的“运动模式”是他人尚未发现的普遍规律，并将该“运动模式”应用到未来的投资中去，从而投资者就会产生反应过度的现象。例如投资者经过观察发现上季度盈利的股票一般情况下在本季度会继续表现良好，因此股价不停的再创新高，于是投资者总结了一个规律，认为该股票下一个季度将会继续盈利，持有该股票将会继续获利，因此投资者不断买进，导致股价上涨到一个很高的水平，股价因此而表现出反应过度的现象。当日后的市场发现股票的盈利水平没有达到预期时，股价就会开始下跌甚至暴跌。另一种可能的决策偏差叫做保守性偏差，有这种偏差的投资者不能及时充分根据实际市场情况及时修正自己的投资行为，保守性偏差的存在会使投资者出现反应不足的情况。例如：当某公司披露了一件利好信息后，投资者往往不能及时做出反应，该信息会经过一个时间段后才能体现到股票价格，股票价格也因此出现了动量效应。Deniel，Hirshleifer和Subrahmanyam(1998)提出了DHS模型，该模型认为投资者在决策时存在两种偏差：一种是过度自信，实际情况中投资者往往会高估自身能力，对自己拥有的私人信息的价值进行过高估计；另一种是有偏的自我归因，这种现象是指倘若该私有信息得到了证实，将大幅度的加强投资者的信心；反之，如果该私有信息得到了官方否定，投资者的信心会有下降，但下降的程度与同等条件下信心加强的程度相比较要小一些。投资者会忽略与自己意见不同的信息。而正因为过度自信以及有偏的自我归因的共同作用下，股票价格会表现出反转效应与动量效应。通常情况下市场上有影响商品价格的信息出现时，知情交易者会在价格未完全反映该商品信息前进行交易，
<br><br>
<span style="margin-left:25px"></span>随着信息在市场中的逐渐传播，非知情交易者在市场中所占的比例逐渐上升，使得证券价格会保持既有的走势，并逐渐反映出证券的实际价值。随着市场的价格逐步靠近该商品本身的价值，知情交易者从中已经无法获得任何利润，因此知情交易者会离开市场。同时，市场通常对信息有过度反应的现象，知情交易者离开的信息往往会被过度解读，从而市场改变了原有的趋势，价格走势就会发生逆转。第六章某高频交易算法解析与使用
<br><br>
<span style="margin-left:25px"></span>6.1R-BREAK高频交易算法介绍
<br><br>
<span style="margin-left:25px"></span>1998年波涛在《系统交易方法》中指出：
<br><br>
<span style="margin-left:25px"></span>如果一个交易系统需要功能完备，必须明确的规定好在投资过程中的各有关组成部分的定义与界限，此外还应当结合该交易系统使用者的实际情况、投资产品的实际情况以及持有资金的风险情况。每一种高频交易策略都是根据某种对现象的观察或者对市场的解读而设计的。
<br><br>
<span style="margin-left:25px"></span>在日常工作中我们可以接触到多种交易策略，例如Dual Thrust、R-Breaker、Dynamic Breakout II等。其中R-Break策略是一个十分典型的日内交易模型，该策略曾连续14年名列《Futures Truth Magazine》年度Top10赚钱策略。因此在此处我们对R-Breaker策略进行解释与分析。图6.1历年来前十名交易系统的登榜情况，图片来源：
<br><br>
<span style="margin-left:25px"></span>和讯金融实验室虽然最新的 Futures Truth Magazine榜单中 R- Break已经跌到了10名之外，但是由于国内的期货市场发展距离国外还有一定距离，
<br><br>
<span style="margin-left:25px"></span>理解 R- Break策略并尝试对此策略进行改进，是有一定价值的。R-Break策略的类型为日内趋势追踪+反转的策略，从之前文章分析，R-Break策略其内部思想是动量策略和反转策略，因此需要从行为金融学的信息扩散理论来理解。
<br><br>
<span style="margin-left:25px"></span>由于现代期货市场的信息扩散速度已经非常迅速，因此R-Break策略主要适用于周期1分钟或者5分钟的高频交易。枢轴点 (Pivot Points) 交易方法在外汇交易系统是一种比较常见的交易策略。
<br><br>
<span style="margin-left:25px"></span>枢轴点交易方法是一个基于阻力位与支撑位思想的方法，即：根据昨日的最高价、最低价和收盘价，计算出枢轴点以及三个支撑位和三个阻力位。图6.2枢轴点 (Pivot Points)交易算法的枢轴点以及支撑位阻力位
<br><br>
<span style="margin-left:25px"></span>图6.3R-Break策略原理图
<br><br>
<span style="margin-left:25px"></span>R-Break策略的策略如下：
<br><br>
<span style="margin-left:25px"></span>按照上个交易日的收盘价、最高价和最低价数据进行计算，按照相应公式或者规则计算出6个价格，按照由高到低的顺序如下：突破买入价（Bbreak)、观察卖出价(Ssetup)、反转卖出价(Senter)、反转买入价(Benter)、观察买入价(Bsetup)、突破卖出价(Sbreak)。之后根据计算出的价格来作为该交易日交易的交易参考价格。在该策略中，通过对计算参数的调整，可以调节六个价格间的距离。其交易规则为含两个交易规则：
<br><br>
<span style="margin-left:25px"></span>（1）反转规则：
<br><br>
<span style="margin-left:25px"></span>1.1、在交易者净持仓为多仓时，如果当日最高价高于观察卖出价，之后商品价格发生下跌，且下跌的价格已经向下穿破反转卖出价。
<br><br>
<span style="margin-left:25px"></span>此情况下判断市场发生了反转，需要在该点位平掉多仓然后做空；1.2、在交易者净持仓为空仓时，如果当日最低价低于观察买入价，之后商品价格发生上涨，且上涨的价格已经向上穿破反转买入价。
<br><br>
<span style="margin-left:25px"></span>此情况下判断市场发生了反转，需要在该点位平掉空仓然后做多。（2）突破规则：
<br><br>
<span style="margin-left:25px"></span>2.1、在交易者净持仓为零时，倘若商品价格向上穿越突破买入价，则认为市场的趋势已经得到了确立，需要在该价格点位做多商品；
<br><br>
<span style="margin-left:25px"></span>2.2、在交易者净持仓为零时，倘若商品价格向下穿越突破卖出价，则认为市场的趋势已经得到了确立，需要在该价格点位做空商品。
<br><br>
<span style="margin-left:25px"></span>以上四点即为R-Break算法的核心策略部分，我们大致了解到R-Break算法是基于动量策略和反转策略的，下一章节我们来逐个分析。
<br><br>
<span style="margin-left:25px"></span>6.2R-BREAK高频交易算法分析
<br><br>
<span style="margin-left:25px"></span>6.2.1反转规则一：
<br><br>
<span style="margin-left:25px"></span>突破新高后反转反转规则一为：
<br><br>
<span style="margin-left:25px"></span>在交易者净持仓为多仓时，如果当日最高价高于观察卖出价，之后商品价格发生下跌，且下跌的价格已经向下穿破反转卖出价。此情况下判断市场发生了反转，需要在该点位平掉多仓然后做空。将策略代入R-Break策略原理图后可知此规则的内涵为利用反转策略在突破新高后反转。
<br><br>
<span style="margin-left:25px"></span>图6.4R-Break策略的反转规则一
<br><br>
<span style="margin-left:25px"></span>行为金融学认为如果股价或者商品价格涨到一定的幅度时，原有的价格已经有了一定的泡沫，此时投资者往往有多度反应的现象，过度反应会导致价格的反转。
<br><br>
<span style="margin-left:25px"></span>6.2.2反转规则二：
<br><br>
<span style="margin-left:25px"></span>突破新低后反转反转规则二为：
<br><br>
<span style="margin-left:25px"></span>在交易者净持仓为空仓时，如果当日最低价低于观察买入价，之后商品价格发生上涨，且上涨的价格已经向上穿破反转买入价。此情况下判断市场发生了反转，需要在该点位平掉空仓然后做多。将策略代入R-Break策略原理图后可知此规则的内涵为利用反转策略在突破新低后反转。
<br><br>
<span style="margin-left:25px"></span>图6.5R-Break策略的反转规则二
<br><br>
<span style="margin-left:25px"></span>从图中可以看到，R-Break策略的反转规则二是当投资者持有空单时，如果市场行情变好，向上突破阻力位确立之后可以考虑介入空翻多。
<br><br>
<span style="margin-left:25px"></span>6.2.3突破规则一：
<br><br>
<span style="margin-left:25px"></span>确立涨势后追涨突破规则一为：
<br><br>
<span style="margin-left:25px"></span>在交易者净持仓为零时，倘若商品价格向上穿越突破买入价，则认为市场的趋势已经得到了确立，需要在该价格点位做多商品。将策略代入R-Break策略原理图后可知此规则的内涵为利用动量策略在确立涨势后追涨。
<br><br>
<span style="margin-left:25px"></span>图6.6R-Break策略的突破规则一
<br><br>
<span style="margin-left:25px"></span>从图中可以看到，R-Break策略的突破规则一是当投资者此时为空仓时，如果价格突破了阻力线，则认为动量策略交易时机已经出现，可以投资做多交易。
<br><br>
<span style="margin-left:25px"></span>6.2.4突破规则二：
<br><br>
<span style="margin-left:25px"></span>确立跌势后杀跌突破规则二为：
<br><br>
<span style="margin-left:25px"></span>在交易者净持仓为零时，倘若商品价格向下穿越突破卖出价，则认为市场的趋势已经得到了确立，需要在该价格点位做空商品。将策略代入R-Break策略原理图后可知此规则的内涵为利用动量策略在确立跌势后杀跌。
<br><br>
<span style="margin-left:25px"></span>图6.7R-Break策略的突破规则二
<br><br>
<span style="margin-left:25px"></span>从图中可以看到，R-Break策略的突破规则一是当投资者此时为空仓时，如果价格突破了支撑价，则认为动量策略交易时机已经出现，可以投资做空交易。
<br><br>
<span style="margin-left:25px"></span>6.3在交易开拓者中R-BREAK算法的实现
<br><br>
<span style="margin-left:25px"></span>交易开拓者旗舰版是一款较为专业的金融交易软件，该软件同时支持商品期货、金融期货、外盘市场等不同市场的交易程序化、自动套利等功能。
<br><br>
<span style="margin-left:25px"></span>其程序化语言为TradeBlazer Language(TBL)，本章节展示关键代码与其解释说明，全量代码参见附录一：图6.8R-Break策略在每日开始时对各阻力位支撑位参数进行初始化
<br><br>
<span style="margin-left:25px"></span>图6.9反转策略一突破新高后反转
<br><br>
<span style="margin-left:25px"></span>图6.10反转策略二突破新低后反转
<br><br>
<span style="margin-left:25px"></span>图6.11突破策略一确立涨势后追涨
<br><br>
<span style="margin-left:25px"></span>图6.12突破策略二确立跌势后追跌
<br><br>
<span style="margin-left:25px"></span>此外，为了防止每日的震荡行情，在策略中增加了安全保护，如果当日产生了一笔较大亏损，则今日停止动量交易。
<br><br>
<span style="margin-left:25px"></span>图6.13为防止震荡行情导致的反复开平仓，设置动量策略开关保护
<br><br>
<span style="margin-left:25px"></span>6.4R-BREAK算法运用于不同商品的数据回测分析
<br><br>
<span style="margin-left:25px"></span>将R-Break策略运用于沪螺纹钢后，运行效果如下
<br><br>
<span style="margin-left:25px"></span>图6.14R-Break策略运用于沪螺纹钢
<br><br>
<span style="margin-left:25px"></span>使用2015-01-01至2016-12-31日的数据回测效果如表6.1。
<br><br>
<span style="margin-left:25px"></span>表6.1R-Break策略在沪螺纹钢商品上的回测数据
<br><br>
<span style="margin-left:25px"></span>参数配置止损比例观察价比例 f1反转价比例 f2距离参数 f3净利润交易数平均持仓周期最大使用资金收益率
<br><br>
<span style="margin-left:25px"></span>参数110.350.070.25-4490215193492-129%
<br><br>
<span style="margin-left:25px"></span>参数20.20.480.090.136102049348318%
<br><br>
<span style="margin-left:25px"></span>参数30.20.530.090.134001919348311%
<br><br>
<span style="margin-left:25px"></span>参数40.20.530.090.23250167934837%
<br><br>
<span style="margin-left:25px"></span>可以看到，在使用R-Break策略时，关键影响因素为止损比例reverse，观察价比例f1，反转价比例f2，突破价比例与观察价距离f3。
<br><br>
<span style="margin-left:25px"></span>由于每种商品的市场微观结构不同（如商品价格、用户接受程度、是否会受到国外行情影响等），每种商品的参数需要根据历史数据的回测来设定。从上述回测数据可知，如果期望净利润最大，可以使用如下参数：Reverse=0.2（投资者风险偏好，止损值，一般直接指定）
<br><br>
<span style="margin-left:25px"></span>F1=0.48
<br><br>
<span style="margin-left:25px"></span>F2=0.09
<br><br>
<span style="margin-left:25px"></span>F3=0.13
<br><br>
<span style="margin-left:25px"></span>将R-Break策略运用于沪铜后，运行效果如下
<br><br>
<span style="margin-left:25px"></span>图6.15R-Break策略运用于沪铜
<br><br>
<span style="margin-left:25px"></span>使用2015-01-01至2016-12-31日的数据回测效果如表6.2。
<br><br>
<span style="margin-left:25px"></span>表6.2R-Break策略在沪铜商品上的回测数据
<br><br>
<span style="margin-left:25px"></span>参数配置止损比例观察价比例 f1反转价比例 f2距离参数 f3净利润交易数平均持仓周期最大使用资金收益率
<br><br>
<span style="margin-left:25px"></span>参数110.350.070.25-221701771924415-91%
<br><br>
<span style="margin-left:25px"></span>参数20.050.230.070.13-6900245624415-28%
<br><br>
<span style="margin-left:25px"></span>参数30.050.230.070.16-821023662441534%
<br><br>
<span style="margin-left:25px"></span>参数40.050.230.070.14-890024062441536%
<br><br>
<span style="margin-left:25px"></span>从沪铜的回测数据可知，同一个策略运用于不同的商品可能出现亏损，
<br><br>
<span style="margin-left:25px"></span>按照亏损最小来看需要的参数如下（由于佣金返点的存在，因此有的投资者有提升交易量减少损失的需求，因此在亏损下的参数也有其用武之处）：Reverse=0.05（投资者风险偏好，止损值，一般直接指定）
<br><br>
<span style="margin-left:25px"></span>F1=0.23
<br><br>
<span style="margin-left:25px"></span>F2=0.07
<br><br>
<span style="margin-left:25px"></span>F3=0.13
<br><br>
<span style="margin-left:25px"></span>将R-Break策略运用于沪锌后，运行效果如下
<br><br>
<span style="margin-left:25px"></span>图6.16R-Break策略运用于沪锌
<br><br>
<span style="margin-left:25px"></span>使用2015-01-01至2016-12-31日的数据回测效果如表6.3。
<br><br>
<span style="margin-left:25px"></span>表6.3R-Break策略在沪锌商品上的回测数据
<br><br>
<span style="margin-left:25px"></span>参数配置止损比例观察价比例 f1反转价比例 f2距离参数 f3净利润交易数平均持仓周期最大使用资金收益率
<br><br>
<span style="margin-left:25px"></span>参数110.350.070.25-278401792312127-230%
<br><br>
<span style="margin-left:25px"></span>参数20.050.530.060.27-4800125412205-39%
<br><br>
<span style="margin-left:25px"></span>参数30.050.530.040.27-4805123412205-39%
<br><br>
<span style="margin-left:25px"></span>参数40.050.530.070.27-5080128412205-42%
<br><br>
<span style="margin-left:25px"></span>从沪锌的回测数据可知， R- Break策略使用在沪锌上也会发生亏损，
<br><br>
<span style="margin-left:25px"></span>按照亏损最小来看需要的参数如下（由于佣金返点的存在，因此有的投资者有提升交易量减少损失的需求，因此在亏损下的参数也有其用武之处）：Reverse=0.05（投资者风险偏好，止损值，一般直接指定）
<br><br>
<span style="margin-left:25px"></span>F1=0.53
<br><br>
<span style="margin-left:25px"></span>F2=0.06
<br><br>
<span style="margin-left:25px"></span>F3=0.27
<br><br>
<span style="margin-left:25px"></span>第七章总结
<br><br>
<span style="margin-left:25px"></span>金融市场的目的是发现价值以及促进价格向价值的回归，但这种回归并非简单的如教科书上所说
<br><br>
<span style="margin-left:25px"></span>“需求曲线与供给曲线相交与P点，则P点达到了买方与卖方的均衡”在实际市场中，由于种种的不可预测事件的影响，如新供应商的进入、新买家的进入、新商品的推出、技术的推动、国家地缘政治的影响，价格与价值的的关系极其复杂，因此在金融市场上波动性是一种常态。由于价格的波动性，导致了金融市场上出现了获取资本利得的投机行为，仅仅通过技术分析或者走势判断，投机者就可以在金融市场上获取到不小的利润。
<br><br>
<span style="margin-left:25px"></span>从经济学的角度看，这些投机行为是有益于社会的，它们可以为金融市场带来流动性、减少价差、促进价格和价值的回归、帮助市场机制从错误恢复正常。同时也需要注意到这些投机行为也同样伴随着弊端，如果投机性行为过于活跃，则会变相的扭曲市场价格、使市场波动剧烈、使市场的分配资源的功能无法展开。在金融市场的投机性交易严格的说是一个负和游戏，但是由于投资者的盲目自信等心理，他们总认为自己是最幸运的那个，或者至少不是最倒霉的那个。投机性行为是一个专业人士剥夺非专业人士盈利的行为，从获利手段上看，投机性行为的获利方式主要是采用了一些不理性行为如追涨杀跌等，
<br><br>
<span style="margin-left:25px"></span>关于不理性行为的解释在行为金融学以及本文的“动量策略与反转策略”中已经解释，不再赘述。而获利的工具即是各种通过经验总结，或者数据分析而归纳的交易策略，例如：海龟交易策略、配对交易策略、套利交易策略等。在此基础之上，投机者与投机者之间的竞争也十分剧烈，因此武装到牙齿的高频交易由此诞生了，高频交易使用专用的服务器、 colocation机房、光纤直连、计算指令以微妙计数，为的就是比其他的投机者稍快半步。在本研究中，采用了 R- Break策略，对2015-01-01至2016-12-31的沪螺纹钢、沪铜、沪锌数据进行了回归测试，
<br><br>
<span style="margin-left:25px"></span>验证了原生 R- Break策略在沪螺纹钢上会有不错的收益，而在沪铜和沪锌上会产生较大亏损；并且通过回归测试给出了利润最大或者亏损最小的参数值。同时需要认识到，此研究测试尚有不足之处：由于原生 R- Break策略限制，仅能以日为时间标准进行高频开单，从回测数据中也可以看到，两年中符合交易时机的数据仅有两百左右，这个频率远远低于“高频”的概念，我们需要对原生 R- Break策略进行修改，使之能更加体现出高频的概念；同时由于实盘和测试盘有较大区别，例如实盘中每发生一个 tick就会触发一次系统运行，而回归测试盘是根据每一个 bar进行一次系统运行，因此在实盘操作时必须增加此类处理；此外实盘时需要考虑价格的跳跃，如果订单未成交时需要主动取消订单；如此种种由于时间限制在本研究中尚未涉及，有待今后开展相关研究。参考文献
<br><br>
<span style="margin-left:25px"></span>[1] 波涛. 系统交易方法[M]. 经济管理出版社， 1998.
<br><br>
<span style="margin-left:25px"></span>[2] 戴文华. 中国证券市场的技术系统架构和基本要素分析[J]. 证券市场导报， 2003(3):
<br><br>
<span style="margin-left:25px"></span>4-8.[3] 方昊. 统计套利的理论模式及应用分析 --基于中国封闭式基金市场的检验[J]. 统计与决策， 2005(12):
<br><br>
<span style="margin-left:25px"></span>14-16.[4] 胡天福. 高频交易在中国证券市场的应用研究[D]. 上海交通大学， 2012.
<br><br>
<span style="margin-left:25px"></span>[5] 姜金胜. 证券网上交易及其在我国的发展[J]. 青年学报， 2006， 20(1):
<br><br>
<span style="margin-left:25px"></span>61-64.[6] 李超. 我国股指期货与股票组合的高频套利策略研究[D]. 南京大学， 2013.
<br><br>
<span style="margin-left:25px"></span>[7] 蓝海平. 高频交易的技术特征、发展趋势及挑战[J]. 证券市场导报， 2014(4):
<br><br>
<span style="margin-left:25px"></span>59-64.[8] 来升强. 高频数据交易策略与波动性分析[D]. 厦门大学， 2009.
<br><br>
<span style="margin-left:25px"></span>[9] 李臻. 基于做市商策略的股指期货市场自动化交易实证研究[J]. 时代金融旬刊， 2015(21):
<br><br>
<span style="margin-left:25px"></span>110-112.[10] 潘晔. 基于高频交易模式下期货投资组合策略研究[D]. 华南理工大学， 2014.
<br><br>
<span style="margin-left:25px"></span>[11] 期货日报. 量化策略的分类和目前国内的市场容量[J]. 期货日报， 2015.
<br><br>
<span style="margin-left:25px"></span>[12] 王春峰， 张庆翠. 中国股市波动性过程中的长期记忆性实证研究[J]. 系统工程， 2004， 22(1):
<br><br>
<span style="margin-left:25px"></span>78-83.[13] 王帅. 量化投资:
<br><br>
<span style="margin-left:25px"></span>从行为金融到高频交易[D]. 华东师范大学， 2013.[14] 王苏生， 江国朝， 余臻，等. 高频交易刍论——基于中国证券市场的实证研究[M]. 清华大学出版社， 2016.
<br><br>
<span style="margin-left:25px"></span>[15] 吴晓雄. 我国主要商品期货的价格波动与避险效率研究[D]. 西南交通大学， 2015.
<br><br>
<span style="margin-left:25px"></span>[16] 肖卓华. 浅析统计套利的内涵及其在中国的应用前景[J]. 时代金融旬刊， 2011(12):
<br><br>
<span style="margin-left:25px"></span>2-2.[17] 张宇. 我国股市的动量和反转投资策略实证研究[D]. 复旦大学， 2010.
<br><br>
<span style="margin-left:25px"></span>[18] Barberis Nicholas，Andrei Shleifer and Robert Vishny， A model of investor sentiment[J]， Journal of Financial Economics， 1998，(3):
<br><br>
<span style="margin-left:25px"></span>307-343[19] Chaboud A P， Chiquoine B， Hjalmarsson E， et al.
<br><br>
<span style="margin-left:25px"></span> Rise of the Machines: Algorithmic Trading in the Foreign Exchange Market[J]. The Journal of Finance， 2014， 69(5):2045–2084.[20] Cvitanic J， Kirilenko A A.
<br><br>
<span style="margin-left:25px"></span> High Frequency Traders and Asset Prices[J]. Ssrn Electronic Journal， 2010.[21] Daniel K， Hirshleifer D， Subrahmanyam A.
<br><br>
<span style="margin-left:25px"></span> Investor Psychology and Security Market under- and Overreactions[J]. The Journal of Finance， 1998， 53(6):1839-1885.[22] Long J B D， Shleifer A， Summers L H， et al.
<br><br>
<span style="margin-left:25px"></span> Positive Feedback Investment Strategies and Destabilizing Rational Speculation[J]. The Journal of Finance， 1990， 45(2):379-395.[23] Macintosh J G.
<br><br>
<span style="margin-left:25px"></span> High Frequency Traders: Angels or Devils?[J]. Ssrn Electronic Journal， 2013(391).附录
<br><br>
<span style="margin-left:25px"></span>附录A:
<br><br>
<span style="margin-left:25px"></span> 原生R-Break源码//------------------------------------------------------------------------
<br><br>
<span style="margin-left:25px"></span>// 基于交易开拓者TBL的R_Breaker 算法
<br><br>
<span style="margin-left:25px"></span>//------------------------------------------------------------------------
<br><br>
<span style="margin-left:25px"></span>Params
<br><br>
<span style="margin-left:25px"></span>Numeric notbef(9.00);
<br><br>
<span style="margin-left:25px"></span>//开盘时间Numeric notaft(14.55);
<br><br>
<span style="margin-left:25px"></span>//收盘时间Numeric f1(0.35);
<br><br>
<span style="margin-left:25px"></span>Numeric f2(0.07);
<br><br>
<span style="margin-left:25px"></span>Numeric f3(0.25);
<br><br>
<span style="margin-left:25px"></span>Numeric reverse(1.00);
<br><br>
<span style="margin-left:25px"></span>Numeric rangemin(0.2);
<br><br>
<span style="margin-left:25px"></span>Numeric xdiv(3);
<br><br>
<span style="margin-left:25px"></span>//参数，用来调节Senter与Ssetup，或者Benter与Bsetup的距离，此参数越大，则距离越大Vars
<br><br>
<span style="margin-left:25px"></span>NumericSeries ssetup(0);
<br><br>
<span style="margin-left:25px"></span>NumericSeries bsetup(0);
<br><br>
<span style="margin-left:25px"></span>NumericSeries senter(0);
<br><br>
<span style="margin-left:25px"></span>NumericSeries benter(0);
<br><br>
<span style="margin-left:25px"></span>NumericSeries bbreak(0);
<br><br>
<span style="margin-left:25px"></span>NumericSeries sbreak(0);
<br><br>
<span style="margin-left:25px"></span>NumericSeries ltoday(0);
<br><br>
<span style="margin-left:25px"></span>NumericSeries hitoday(9999);
<br><br>
<span style="margin-left:25px"></span>NumericSeries startnow(0);
<br><br>
<span style="margin-left:25px"></span>NumericSeries div(0);
<br><br>
<span style="margin-left:25px"></span>BoolSeries rfilter(false);
<br><br>
<span style="margin-left:25px"></span>Numeric i_reverse;
<br><br>
<span style="margin-left:25px"></span>Numeric i_rangemin;
<br><br>
<span style="margin-left:25px"></span>Numeric i_vB;
<br><br>
<span style="margin-left:25px"></span>Numeric i_vS;
<br><br>
<span style="margin-left:25px"></span>Begin
<br><br>
<span style="margin-left:25px"></span>i_reverse = reverse*(OpenD(0)/100);
<br><br>
<span style="margin-left:25px"></span>//查询当前bar的开盘价*reverse的值i_rangemin = rangemin*(OpenD(0)/100);
<br><br>
<span style="margin-left:25px"></span>//当前bar的开盘价*rangemin的值，该值为上下范围if(BarStatus==0)//如果是第一根bar
<br><br>
<span style="margin-left:25px"></span>startnow=0;
<br><br>
<span style="margin-left:25px"></span>//设置startnow=0div=max(xdiv，1);
<br><br>
<span style="margin-left:25px"></span>//设置div为xdiv与1的最大值if(Date !
<br><br>
<span style="margin-left:25px"></span>= Date[1])//如果是每天的第一根barSetGlobalVar(0，0);
<br><br>
<span style="margin-left:25px"></span>//设置全局变量0为0SetGlobalVar(1，0);
<br><br>
<span style="margin-left:25px"></span>//设置全局变量1为0startnow=startnow+1;
<br><br>
<span style="margin-left:25px"></span>//startnow计数器加1ssetup=hitoday[1]+f1*(Close[1]-ltoday[1]);
<br><br>
<span style="margin-left:25px"></span>//计算ssetup卖出观察价为hitoday[1]昨日最高+f1(0.35)*（昨天收盘-昨天最低）senter=((1+f2)/2)*(hitoday[1]+Close[1])-(f2)*ltoday[1];
<br><br>
<span style="margin-left:25px"></span>//计算senter反转卖出价为((1+f2(0.07))/2*(昨最高+昨收盘）-f2(0.07)*昨天最低benter=((1+f2)/2)*(ltoday[1]+Close[1])-(f2)*hitoday[1];
<br><br>
<span style="margin-left:25px"></span>//计算benter反转买入价为((1+f2(0.07))/2*(昨最低+昨收盘）-f2(0.07)*昨天最高bsetup=ltoday[1]-f1*(hitoday[1]-Close[1]);
<br><br>
<span style="margin-left:25px"></span>//计算bsetup买入观察价为ltoday[1]昨日最低-f1(0.35)*（昨天最高-昨天收盘）bbreak=ssetup+f3*(ssetup-bsetup);
<br><br>
<span style="margin-left:25px"></span>//计算Bbreak突破买入价为ssetup卖出观察价+f3(0.25)*(卖出观察价-买入观察价)sbreak=bsetup-f3*(ssetup-bsetup);
<br><br>
<span style="margin-left:25px"></span>//计算Bbreak突破买入价为bsetup买入观察价+f3(0.25)*(卖出观察价-买入观察价)hitoday=High;
<br><br>
<span style="margin-left:25px"></span>//更新最高数据ltoday=Low;
<br><br>
<span style="margin-left:25px"></span>//更新最低数据rfilter=(hitoday[1]-ltoday[1])]=i_rangemin;
<br><br>
<span style="margin-left:25px"></span>//计算一个标志位，是否昨日的波动差大于当前开盘价的20%if(High]hitoday)
<br><br>
<span style="margin-left:25px"></span>hitoday=High;
<br><br>
<span style="margin-left:25px"></span>//更新最高数据if(Low[ltoday)
<br><br>
<span style="margin-left:25px"></span>ltoday=Low;
<br><br>
<span style="margin-left:25px"></span>//更新最低数据if(Time*100]=notbef and Time*100[notaft and startnow]=2 and rfilter)//如果是要求的开盘时间且昨日波动幅度大于商品价格的20%
<br><br>
<span style="margin-left:25px"></span>if(Time !
<br><br>
<span style="margin-left:25px"></span>= GetGlobalVar(1) and GetGlobalVar(1) != 0)SetGlobalVar(1，10000);
<br><br>
<span style="margin-left:25px"></span>//为全局变量1设置一个初始值为10000，此处应存放时间if(hitoday]=ssetup and marketposition]-1 and GetGlobalVar(1)[1)//如果当前最高价大于卖出观察价并且当前仓位为平仓或者多仓，且交易时间正常
<br><br>
<span style="margin-left:25px"></span>If(Low[=(senter+(hitoday-ssetup)/div))//如果当前最低值小于（反转卖出价+（今日最高价-卖出观察价）/div除数）
<br><br>
<span style="margin-left:25px"></span>SellShort(1，senter+(hitoday-ssetup)/div);
<br><br>
<span style="margin-left:25px"></span>//则空头建仓，单位为1手，价格为senter+(hitoday-ssetup)/divSetGlobalVar(1，Time);
<br><br>
<span style="margin-left:25px"></span>//设置全局变量1为交易时间Return;
<br><br>
<span style="margin-left:25px"></span>//此策略为反转策略一，突破新高后反转。
<br><br>
<span style="margin-left:25px"></span>if(ltoday[=bsetup and marketposition[1 and GetGlobalVar(1)[1)//如果当前最低价小于买入观察价并且当前仓位为平仓或者空仓，且交易时间正常
<br><br>
<span style="margin-left:25px"></span>If(High]=(benter-(bsetup-ltoday)/div))//如果当前最高值大于（反转买入价-（买入观察价-今日最低价）/div除数）
<br><br>
<span style="margin-left:25px"></span>Buy(1，benter-(bsetup-ltoday)/div);
<br><br>
<span style="margin-left:25px"></span>//则多头建仓，单位为1手，价格为benter-(bsetup-ltoday)/divSetGlobalVar(1，Time);
<br><br>
<span style="margin-left:25px"></span>//设置全局变量1为交易时间Return;
<br><br>
<span style="margin-left:25px"></span>//此策略为反转策略二，突破新低后反转。
<br><br>
<span style="margin-left:25px"></span>if(marketposition==-1)//如果当前系统持有空单
<br><br>
<span style="margin-left:25px"></span>SetGlobalVar(0，1);
<br><br>
<span style="margin-left:25px"></span>//设置全局变量为1，此变量为开关，控制当日是否继续开仓，1为当日不再因动量策略开仓if(High-EntryPrice]=i_reverse)//如果当前最高价格-建仓价格大于i_reverse，则止损离场并今日停止交易
<br><br>
<span style="margin-left:25px"></span>BuyToCover(1，entryprice+i_reverse);
<br><br>
<span style="margin-left:25px"></span>//空头平仓操作Return;
<br><br>
<span style="margin-left:25px"></span>if(marketposition==1)//如果当前系统持有多单
<br><br>
<span style="margin-left:25px"></span>SetGlobalVar(0，1);
<br><br>
<span style="margin-left:25px"></span>//设置全局变量为1，此变量为开关，控制当日是否继续开仓，1为当日不再因动量策略开仓if(EntryPrice-Low]=i_reverse)//如果建仓价格-当日最低价格大于i_reverse，则止损离场并今日停止交易
<br><br>
<span style="margin-left:25px"></span>Sell(1，entryprice-i_reverse);
<br><br>
<span style="margin-left:25px"></span>//多头平仓操作Return;
<br><br>
<span style="margin-left:25px"></span>if(marketposition==0)//如果是平仓
<br><br>
<span style="margin-left:25px"></span>if(High]=bbreak and GetGlobalVar(0) == 0)//如果今日最高突破了突破买入价，并且动量策略开仓开关为开启，则买入做多
<br><br>
<span style="margin-left:25px"></span>Buy(1，bbreak);
<br><br>
<span style="margin-left:25px"></span>//按照bbreak价格买入1手Return;
<br><br>
<span style="margin-left:25px"></span>//突破策略一，确立涨势后追涨；
<br><br>
<span style="margin-left:25px"></span>if(marketposition==0)//如果是平仓
<br><br>
<span style="margin-left:25px"></span>if(low[=sbreak and GetGlobalVar(0) == 0)//如果今日最低突破了突破卖出价，并且动量策略开仓开关为开启，则卖出做空
<br><br>
<span style="margin-left:25px"></span>SellShort(1，sbreak);
<br><br>
<span style="margin-left:25px"></span>//按照sbreak价格卖出1手Return;
<br><br>
<span style="margin-left:25px"></span>//突破策略二，确立跌势后追跌；
<br><br>
<span style="margin-left:25px"></span>if(Time*100]=notaft and Time[0.1600)//如果时间大于指定的交易时间，则统一平仓
<br><br>
<span style="margin-left:25px"></span>if(marketposition==-1)
<br><br>
<span style="margin-left:25px"></span>BuyToCover(1，Open);
<br><br>
<span style="margin-left:25px"></span>//如果是空头，则买入平仓，卖出价格为当前价格if(marketposition==1)
<br><br>
<span style="margin-left:25px"></span>Sell(1，Open);
<br><br>
<span style="margin-left:25px"></span>//如果是多头，则卖出平仓，卖出价格为当前价格End
<br><br>
<span style="margin-left:25px"></span>//------------------------------------------------------------------------
<br><br>
<span style="margin-left:25px"></span>

<br>
<div style="margin-left:8px">

<div style="text-align:center;background-color:#CA122C;margin-top:30px;overflow:hidden;">
<a href="http://www.paperpass.com/publish/index?from=ppreport_banner" target="_blank" style="display:block;"><img height="180" src="http://file.paperpass.com/images/fabiao.jpg"></a>
</div>

</div>
</div>


<div class="zhengwencenter">
<p>
检测报告由<a href="http://www.paperpass.com/" target="_blank">PaperPass</a>文献相似度检测系统生成
</p>
<p>
Copyright © 2007-2017 PaperPass
</p>
</div>
<div style="margin-bottom:400px"></div>
</body>
</html>
